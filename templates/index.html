<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angela · 非劳务收入路径设计师</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container my-5">
        <!-- Header Section -->
        <div class="text-center mb-5">
            <div class="d-inline-block p-4 rounded-circle mb-3" style="background: linear-gradient(135deg, var(--warm-orange), var(--light-orange));">
                <i class="fas fa-lightbulb text-white" style="font-size: 3rem;"></i>
            </div>
            <h1 class="display-4 mb-3" style="color: var(--text-dark); font-weight: 600;">
                Angela
            </h1>
            <h2 class="h3 mb-4" style="color: var(--warm-orange); font-weight: 500;">非劳务收入路径设计师</h2>
            <p class="lead" style="color: var(--text-light); max-width: 600px; margin: 0 auto;">我将根据你输入的信息，为你推演出可行的非劳务收入方案</p>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else 'info' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('generate') }}" id="mainForm">
            <!-- Module A: Project Basic Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-info-circle me-2"></i>模块 A：项目基础信息
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="project_name" class="form-label">项目名称 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="project_name" name="project_name" required 
                                   placeholder="请输入项目名称">
                        </div>
                        <div class="col-md-6">
                            <label for="project_stage" class="form-label">当前阶段</label>
                            <select class="form-select" id="project_stage" name="project_stage">
                                <option value="">选择项目阶段</option>
                                <option value="初步接触">初步接触</option>
                                <option value="认识关键人但未推动">认识关键人但未推动</option>
                                <option value="资源具备，等待设计整合">资源具备，等待设计整合</option>
                                <option value="项目已启动部分内容">项目已启动部分内容</option>
                                <option value="项目进入执行阶段">项目进入执行阶段</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="project_description" class="form-label">项目背景描述 <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="project_description" name="project_description" rows="4" required
                                      placeholder="请详细描述项目背景、现状和目标"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Module B: Key Persons Cards -->
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-users me-2"></i>模块 B：关键人物
                    </h3>
                    <button type="button" class="btn btn-outline-info btn-sm" id="addPersonBtn">
                        <i class="fas fa-plus me-1"></i>添加关键人物
                    </button>
                </div>
                <div class="card-body">
                    <div id="personsContainer">
                        <!-- Person cards will be added here dynamically -->
                    </div>
                    <div class="text-muted" id="noPersonsMsg">
                        <i class="fas fa-info-circle me-2"></i>点击"添加关键人物"开始添加项目相关的重要人员
                    </div>
                </div>
            </div>

            <!-- Module C: External Resources -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-boxes me-2"></i>模块 C：用户掌握的外围资源（可选）
                    </h3>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-3">选择您已掌握的外围资源：</p>
                    <div class="row g-2" id="resourceTags">
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource1" name="external_resources" value="自媒体资源">
                            <label class="btn btn-outline-secondary btn-sm" for="resource1">自媒体资源</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource2" name="external_resources" value="合作方产品">
                            <label class="btn btn-outline-secondary btn-sm" for="resource2">合作方产品</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource3" name="external_resources" value="渠道入口">
                            <label class="btn btn-outline-secondary btn-sm" for="resource3">渠道入口</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource4" name="external_resources" value="顾问背书">
                            <label class="btn btn-outline-secondary btn-sm" for="resource4">顾问背书</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource5" name="external_resources" value="内容产能">
                            <label class="btn btn-outline-secondary btn-sm" for="resource5">内容产能</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource6" name="external_resources" value="分发账号">
                            <label class="btn btn-outline-secondary btn-sm" for="resource6">分发账号</label>
                        </div>
                        <div class="col-auto">
                            <input type="checkbox" class="btn-check" id="resource7" name="external_resources" value="SaaS 工具">
                            <label class="btn btn-outline-secondary btn-sm" for="resource7">SaaS 工具</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg px-5 py-3" style="font-size: 1.1rem; border-radius: 25px;">
                    <i class="fas fa-magic me-2"></i>生成非劳务收入路径草案
                </button>
            </div>
        </form>
    </div>

    <!-- Person Card Template (Hidden) -->
    <template id="personCardTemplate">
        <div class="person-card border rounded p-3 mb-3 position-relative">
            <button type="button" class="btn btn-outline-danger btn-sm position-absolute top-0 end-0 m-2 remove-person-btn">
                <i class="fas fa-times"></i>
            </button>
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">人物代号/姓名</label>
                    <input type="text" class="form-control" name="person_name[]" placeholder="例如：A总">
                </div>
                <div class="col-md-6">
                    <label class="form-label">身份角色</label>
                    <select class="form-select" name="person_role[]">
                        <option value="">选择身份角色</option>
                        <option value="品牌方代表">品牌方代表</option>
                        <option value="投资方（或投资人）">投资方（或投资人）</option>
                        <option value="渠道资源持有者">渠道资源持有者</option>
                        <option value="平台运营方">平台运营方</option>
                        <option value="社群/流量掌控者">社群/流量掌控者</option>
                        <option value="IP/内容方">IP/内容方</option>
                        <option value="产品方">产品方</option>
                        <option value="外部专家顾问">外部专家顾问</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="form-label">掌握的资源</label>
                    <input type="text" class="form-control" name="person_resources[]" 
                           placeholder="请用逗号分隔多个资源，例如：品牌内容资源,产品分销权限">
                </div>
                <div class="col-12">
                    <label class="form-label">如何让此人开心（需求/痛点）</label>
                    <textarea class="form-control" name="person_needs[]" rows="3" 
                              placeholder="例如：需要曝光、不能承担风险，希望快速落地有结果"></textarea>
                </div>
            </div>
        </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/form.js') }}"></script>
</body>
</html>
