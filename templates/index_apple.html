<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angela Â· éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</title>
    
    <!-- é¢„åŠ è½½å…³é”®å­—ä½“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Appleçº§åˆ«è®¾è®¡ç³»ç»Ÿ -->
    <link href="{{ url_for('static', filename='css/apple-design-system.css') }}" rel="stylesheet">
    
    <!-- SEOä¼˜åŒ– -->
    <meta name="description" content="Angela - Appleçº§åˆ«AIé©±åŠ¨çš„éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å·¥å…·ï¼Œä¸–ç•Œä¸€æµçš„ç”¨æˆ·ä½“éªŒ">
    <meta name="keywords" content="AIæ”¶å…¥è®¾è®¡,éåŠ³åŠ¡æ”¶å…¥,æ™ºèƒ½ç®¡é“,å•†ä¸šç­–ç•¥,Appleè®¾è®¡">
</head>
<body>
    <!-- Appleé£æ ¼å¯¼èˆªæ  -->
    <nav class="navigation-bar">
        <div class="nav-content">
            <a href="{{ url_for('index') }}" class="nav-brand">
                <i class="fas fa-brain"></i>
                Angela
            </a>
            <div class="nav-actions">
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-small">
                    <i class="fas fa-cog me-2"></i>ç®¡ç†ä¸­å¿ƒ
                </a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- é¡µé¢æ ‡é¢˜åŒºåŸŸ -->
        <header class="page-header fade-in">
            <h1 class="page-title">éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</h1>
            <p class="page-subtitle">è¿ç”¨å…ˆè¿›AIç®—æ³•ï¼Œä¸ºæ‚¨ç²¾å‡†è®¾è®¡åˆ›æ–°çš„éåŠ³åŠ¡æ”¶å…¥è§£å†³æ–¹æ¡ˆã€‚åŸºäºæ‚¨çš„é¡¹ç›®ä¿¡æ¯å’Œå›¢é˜Ÿèµ„æºï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„æ”¶å…¥ç®¡é“ç­–ç•¥ã€‚</p>
        </header>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div style="margin-bottom: var(--space-8);">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'error' if category == 'error' else 'info' }} slide-up">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- ä¸»è¦è¡¨å• -->
        <form method="POST" action="{{ url_for('generate') }}" id="mainForm" class="slide-up">
            
            <!-- é¡¹ç›®åŸºç¡€ä¿¡æ¯æ¨¡å— -->
            <div class="card fade-in">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-rocket"></i>
                        é¡¹ç›®åŸºç¡€ä¿¡æ¯
                    </h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="project_name" class="form-label">é¡¹ç›®åç§°</label>
                        <input type="text" class="form-control" id="project_name" name="project_name" 
                               placeholder="è¯·è¾“å…¥æ‚¨çš„é¡¹ç›®åç§°" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_description" class="form-label">é¡¹ç›®èƒŒæ™¯æè¿°</label>
                        <textarea class="form-control" id="project_description" name="project_description" 
                                  placeholder="è¯¦ç»†æè¿°æ‚¨çš„é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡å’Œç°çŠ¶..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_stage" class="form-label">é¡¹ç›®é˜¶æ®µ</label>
                        <select class="form-control" id="project_stage" name="project_stage">
                            <option value="">é€‰æ‹©é¡¹ç›®å½“å‰é˜¶æ®µ</option>
                            <option value="idea">æƒ³æ³•é˜¶æ®µ</option>
                            <option value="planning">è§„åˆ’é˜¶æ®µ</option>
                            <option value="development">å¼€å‘é˜¶æ®µ</option>
                            <option value="testing">æµ‹è¯•é˜¶æ®µ</option>
                            <option value="launch">å‡†å¤‡ä¸Šçº¿</option>
                            <option value="running">å·²ä¸Šçº¿è¿è¥</option>
                            <option value="scaling">è§„æ¨¡åŒ–æ‰©å±•</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- å…³é”®äººç‰©æ¨¡å— -->
            <div class="card fade-in">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-users"></i>
                        å…³é”®äººç‰©åˆ—è¡¨
                    </h3>
                </div>
                <div class="card-body">
                    <div id="personsContainer">
                        <!-- åˆå§‹äººç‰©å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="text-center mt-4" id="emptyState">
                        <p class="text-muted">
                            <i class="fas fa-users-slash"></i>
                            è¿˜æ²¡æœ‰æ·»åŠ å…³é”®äººç‰©ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ·»åŠ 
                        </p>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary interactive" onclick="addPerson()">
                            <i class="fas fa-plus me-2"></i>
                            æ·»åŠ å…³é”®äººç‰©
                        </button>
                    </div>
                </div>
            </div>

            <!-- å¤–éƒ¨èµ„æºæ¨¡å— -->
            <div class="card fade-in">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-network-wired"></i>
                        å¤–éƒ¨èµ„æºä¸åˆä½œ
                    </h3>
                </div>
                <div class="card-body">
                    <label class="form-label">ä½ è¿˜æœ‰å“ªäº›å…¶ä»–èµ„æº</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æ”¿åºœè¡¥è´´">
                            <span>æ”¿åºœè¡¥è´´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ•èµ„æœºæ„">
                            <span>æŠ•èµ„æœºæ„</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åˆä½œä¼™ä¼´">
                            <span>åˆä½œä¼™ä¼´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¾›åº”é“¾">
                            <span>ä¾›åº”é“¾èµ„æº</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ€æœ¯å¹³å°">
                            <span>æŠ€æœ¯å¹³å°</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åª’ä½“æ¸ é“">
                            <span>åª’ä½“æ¸ é“</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="è¡Œä¸šåä¼š">
                            <span>è¡Œä¸šåä¼š</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¸“ä¸šæœåŠ¡">
                            <span>ä¸“ä¸šæœåŠ¡æœºæ„</span>
                        </label>
                    </div>
                    
                    <!-- å…¶ä»–èµ„æºè¾“å…¥ -->
                    <div class="form-group" style="margin-top: var(--space-6);">
                        <label class="checkbox-item">
                            <input type="checkbox" id="other_resource_checkbox" name="other_resource_checkbox">
                            <span>å…¶ä»–èµ„æº</span>
                        </label>
                        <input type="text" class="form-control" id="other_resource_text" name="other_resource_text" 
                               placeholder="è¯·æè¿°å…¶ä»–å¯ç”¨çš„å¤–éƒ¨èµ„æº..." style="margin-top: var(--space-3); display: none;">
                    </div>
                </div>
            </div>

            <!-- æäº¤æŒ‰é’® -->
            <div style="text-align: center; margin-top: var(--space-16); padding-top: var(--space-12); border-top: 1px solid var(--color-gray-200);">
                <button type="submit" class="btn btn-primary btn-large interactive">
                    <i class="fas fa-magic me-2"></i>
                    å¼€å§‹AIæ™ºèƒ½åˆ†æ
                </button>
                <p style="margin-top: var(--space-6); color: var(--color-text-secondary); font-size: var(--text-sm);">
                    åŸºäºæ‚¨æä¾›çš„ä¿¡æ¯ï¼ŒAIå°†åœ¨å‡ ç§’å†…ç”Ÿæˆä¸“ä¸šçš„æ”¶å…¥ç®¡é“è®¾è®¡æ–¹æ¡ˆ
                </p>
            </div>
        </form>
    </main>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // äººç‰©è®¡æ•°å™¨
        let personCount = 0;
        
        // æ·»åŠ äººç‰©å¡ç‰‡
        function addPerson() {
            personCount++;
            const container = document.getElementById('personsContainer');
            
            const personCard = document.createElement('div');
            personCard.className = 'person-card slide-up';
            personCard.innerHTML = `
                <div class="person-card-header">
                    <div class="person-number">${personCount}</div>
                    <button type="button" class="remove-person-btn" onclick="removePerson(this)">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">äººç‰©ä»£å·/å§“å</label>
                    <input type="text" class="form-control" name="person_name[]" placeholder="ä¾‹å¦‚ï¼šAæ€»">
                </div>
                
                <div class="form-group">
                    <label class="form-label">èº«ä»½è§’è‰²</label>
                    <select class="form-control" name="person_role[]">
                        <option value="">é€‰æ‹©èº«ä»½è§’è‰²</option>
                        <option value="å“ç‰Œæ–¹ä»£è¡¨">å“ç‰Œæ–¹ä»£è¡¨</option>
                        <option value="æŠ•èµ„æ–¹ï¼ˆæˆ–æŠ•èµ„äººï¼‰">æŠ•èµ„æ–¹ï¼ˆæˆ–æŠ•èµ„äººï¼‰</option>
                        <option value="æ¸ é“èµ„æºæŒæœ‰è€…">æ¸ é“èµ„æºæŒæœ‰è€…</option>
                        <option value="å¹³å°è¿è¥æ–¹">å¹³å°è¿è¥æ–¹</option>
                        <option value="ç¤¾ç¾¤/æµé‡æŒæ§è€…">ç¤¾ç¾¤/æµé‡æŒæ§è€…</option>
                        <option value="IP/å†…å®¹æ–¹">IP/å†…å®¹æ–¹</option>
                        <option value="äº§å“æ–¹">äº§å“æ–¹</option>
                        <option value="å¤–éƒ¨ä¸“å®¶é¡¾é—®">å¤–éƒ¨ä¸“å®¶é¡¾é—®</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">æŒæ¡çš„èµ„æº</label>
                    <input type="text" class="form-control" name="person_resources[]" 
                           placeholder="è¯·ç”¨é€—å·åˆ†éš”å¤šä¸ªèµ„æºï¼Œä¾‹å¦‚ï¼šå“ç‰Œå†…å®¹èµ„æº,äº§å“åˆ†é”€æƒé™">
                </div>
                
                <div class="form-group">
                    <label class="form-label">å¦‚ä½•è®©æ­¤äººå¼€å¿ƒï¼ˆéœ€æ±‚/ç—›ç‚¹ï¼‰</label>
                    <div class="needs-selection-container">
                        <!-- é»˜è®¤æ˜¾ç¤ºçš„å‰ä¸¤ä¸ªåˆ†ç±» -->
                        <div class="needs-visible-section">
                            <!-- ç»“æœå›æŠ¥ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-primary); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-primary); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”µ</span>æƒ³çœ‹åˆ°å›æŠ¥ / å®é™…æ•ˆæœ
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æ‹¿åˆ°åˆ†æˆ">
                                        <span>æ‹¿åˆ°åˆ†æˆ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="å¸¦æ¥å®¢æˆ·">
                                        <span>å¸¦æ¥å®¢æˆ·</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="å°½å¿«è½åœ°">
                                        <span>é¡¹ç›®å°½å¿«è½åœ°</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æŒç»­æ”¶ç›Š">
                                        <span>èƒ½é•¿æœŸæŒç»­èµšé’±</span>
                                    </label>
                                </div>
                            </div>

                            <!-- æ›å…‰å½±å“ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-success); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-success); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¢</span>æƒ³è¢«çœ‹è§ / è¢«å®£ä¼ 
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="å“ç‰Œæ›å…‰">
                                        <span>æœ‰å“ç‰Œæ›å…‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æ‰“é€ äººè®¾">
                                        <span>æ‰“é€ äººè®¾ / ä¸“å®¶èº«ä»½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="åœˆå±‚ç²¾å‡†">
                                        <span>æ›å…‰åœˆå­ç²¾å‡†</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æˆä¸ºå‘èµ·äºº">
                                        <span>é¡¹ç›®ä»¥ä»–ä¸ºä¸»å¯¼</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- å±•å¼€æ—¶æ˜¾ç¤ºçš„å…¶ä»–åˆ†ç±» -->
                        <div class="needs-expandable-section" style="display: none;">
                            <!-- ä¸»å¯¼æ§åˆ¶ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-warning); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-warning); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¡</span>æƒ³ä¸»å¯¼é¡¹ç›® / æœ‰è¯è¯­æƒ
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="è‡ªå·±å†³å®šèŠ‚å¥">
                                        <span>è‡ªå·±å†³å®šèŠ‚å¥</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="ä¸æƒ³è¢«å·¥å…·åŒ–">
                                        <span>ä¸æƒ³åªæ˜¯èµ„æºäºº</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="å†³å®šåˆä½œäºº">
                                        <span>æƒ³å†³å®šå’Œè°åˆä½œ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æƒ³ç­–åˆ’åŒ…è£…">
                                        <span>æƒ³å‚ä¸å†…å®¹ç­–åˆ’</span>
                                    </label>
                                </div>
                            </div>

                            <!-- é£é™©è§„é¿ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-error); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-error); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ </span>ä¸æƒ³å†’é£é™©
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="ä¸æ‹…è´£">
                                        <span>ä¸å‡ºé’±ä¸æ‹…è´£</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="ä¸å…¬å¼€éœ²è„¸">
                                        <span>ä¸å…¬å¼€éœ²è„¸</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="é¿å¼€å†²çª">
                                        <span>ä¸å½±å“å·²æœ‰åˆä½œæ–¹</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="ä¿¡æ¯ä¿å¯†">
                                        <span>å¸Œæœ›ä¿¡æ¯ä¿å¯†</span>
                                    </label>
                                </div>
                            </div>

                            <!-- è¢«å°Šé‡ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-info); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-info); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”´</span>æƒ³è¢«å°Šé‡ / æœ‰åœ°ä½
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æˆä¸ºé¡¾é—®">
                                        <span>æˆä¸ºé¡¾é—®/ä¸“å®¶</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="ä½“ç°ä»·å€¼">
                                        <span>ä½“ç°å‡ºä»–å¾ˆé‡è¦</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="åœˆå­æœ‰åœ°ä½">
                                        <span>æå‡åœˆå­é‡Œçš„åœ°ä½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="è‡ªå·±ç»„çš„å±€">
                                        <span>åƒæ˜¯ä»–å‘èµ·çš„å±€</span>
                                    </label>
                                </div>
                            </div>

                            <!-- äººè„‰æƒ…ç»ª -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-gray-700); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-700); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ£</span>åœ¨ä¹äººè„‰ / æ„Ÿå—
                                </h6>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æ‹“å±•äººè„‰">
                                        <span>æ‹“å±•äººè„‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="æœ‰å‚ä¸æ„Ÿ">
                                        <span>æœ‰å‚ä¸æ„Ÿ / æˆå°±æ„Ÿ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="èƒ½å½“è°ˆèµ„">
                                        <span>é¡¹ç›®èƒ½å½“è°ˆèµ„</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="è¢«é‚€è¯·çš„æ„Ÿè§‰">
                                        <span>æœ‰è¢«é‚€è¯·çš„æ„Ÿè§‰</span>
                                    </label>
                                </div>
                            </div>

                            <!-- å…¶ä»–è‡ªå®šä¹‰ -->
                            <div class="tag-group">
                                <h6 style="color: var(--color-gray-600); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-600); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">âœï¸</span>å…¶ä»–ï¼ˆå¯è¡¥å……æè¿°ï¼‰
                                </h6>
                                <textarea class="form-control" name="person_needs_extra[]" rows="2" 
                                          placeholder="è¿˜æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç‚¹ä¼šè®©ä»–æ„¿æ„å‚ä¸ï¼Ÿæ¯”å¦‚ï¼šè€æ¿åˆšæ‰¹é¢„ç®—ï¼Œæˆ–è€…æœ€è¿‘æƒ³å†²æ•°æ®..."></textarea>
                            </div>
                        </div>

                        <!-- å±•å¼€/æ”¶èµ·æŒ‰é’® -->
                        <div style="text-align: center; margin-top: var(--space-3);">
                            <button type="button" class="btn-outline expand-toggle-btn" style="font-size: var(--text-sm); padding: var(--space-1) var(--space-3);" onclick="toggleExpand(this)">
                                <i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(personCard);
            updateEmptyState();
        }
        
        // åˆ é™¤äººç‰©å¡ç‰‡
        function removePerson(button) {
            const card = button.closest('.person-card');
            card.style.animation = 'slideUp 0.3s ease-out reverse';
            setTimeout(() => {
                card.remove();
                updatePersonNumbers();
                updateEmptyState();
            }, 300);
        }
        
        // æ›´æ–°äººç‰©ç¼–å·
        function updatePersonNumbers() {
            const cards = document.querySelectorAll('.person-card');
            cards.forEach((card, index) => {
                const numberElement = card.querySelector('.person-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
            personCount = cards.length;
        }
        
        // æ›´æ–°ç©ºçŠ¶æ€æ˜¾ç¤º
        function updateEmptyState() {
            const emptyState = document.getElementById('emptyState');
            const cards = document.querySelectorAll('.person-card');
            if (emptyState) {
                emptyState.style.display = cards.length === 0 ? 'block' : 'none';
            }
        }
        
        // åˆ‡æ¢å±•å¼€çŠ¶æ€
        function toggleExpand(button) {
            const container = button.closest('.needs-selection-container');
            const expandableSection = container.querySelector('.needs-expandable-section');
            const icon = button.querySelector('i');
            
            if (expandableSection.style.display === 'none') {
                expandableSection.style.display = 'block';
                icon.className = 'fas fa-angle-up me-1';
                button.innerHTML = '<i class="fas fa-angle-up me-1"></i>æ”¶èµ·é€‰é¡¹';
            } else {
                expandableSection.style.display = 'none';
                icon.className = 'fas fa-angle-down me-1';
                button.innerHTML = '<i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹';
            }
        }
        
        // å…¶ä»–èµ„æºå¤é€‰æ¡†åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const otherResourceCheckbox = document.getElementById('other_resource_checkbox');
            const otherResourceText = document.getElementById('other_resource_text');
            
            if (otherResourceCheckbox && otherResourceText) {
                otherResourceCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        otherResourceText.style.display = 'block';
                        otherResourceText.focus();
                    } else {
                        otherResourceText.style.display = 'none';
                        otherResourceText.value = '';
                    }
                });
            }
            
            // åˆå§‹åŒ–ç©ºçŠ¶æ€
            updateEmptyState();
        });
        
        // å¤„ç†å…¶ä»–èµ„æºè¾“å…¥æ¡†æ˜¾ç¤º
        document.getElementById('other_resource_checkbox').addEventListener('change', function() {
            const textInput = document.getElementById('other_resource_text');
            if (this.checked) {
                textInput.style.display = 'block';
                textInput.focus();
            } else {
                textInput.style.display = 'none';
                textInput.value = '';
            }
        });
        
        // è¡¨å•æäº¤å‰éªŒè¯
        document.getElementById('mainForm').addEventListener('submit', function(e) {
            const projectName = document.getElementById('project_name').value.trim();
            const projectDescription = document.getElementById('project_description').value.trim();
            
            if (!projectName || !projectDescription) {
                e.preventDefault();
                alert('è¯·å¡«å†™é¡¹ç›®åç§°å’ŒèƒŒæ™¯æè¿°');
                return;
            }
            
            // æ·»åŠ æäº¤åŠ¨ç”»
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>æ­£åœ¨åˆ†æ...';
            submitBtn.disabled = true;
        });
        
        // é¡µé¢åŠ è½½æ—¶æ·»åŠ åˆå§‹äººç‰©å¡ç‰‡
        document.addEventListener('DOMContentLoaded', function() {
            addPerson();
        });
        
        // æ·»åŠ å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // æ·»åŠ è¾“å…¥æ¡†ç„¦ç‚¹åŠ¨ç”»
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
            });
        });
    </script>
</body>
</html>