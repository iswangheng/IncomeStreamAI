<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angela Â· éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</title>
    
    <!-- é¢„åŠ è½½å…³é”®å­—ä½“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Appleçº§åˆ«è®¾è®¡ç³»ç»Ÿ -->
    <link href="{{ url_for('static', filename='css/apple-design-system.css') }}" rel="stylesheet">
    <!-- æœªæ¥ç§‘å¹»å¢å¼ºç‰ˆè®¾è®¡ç³»ç»Ÿ -->
    <link href="{{ url_for('static', filename='css/future-enhanced-apple.css') }}" rel="stylesheet">
    <!-- æŒ‰é’®ä¿®å¤æ ·å¼ -->
    <link href="{{ url_for('static', filename='css/button-fix.css') }}" rel="stylesheet">
    
    <!-- SEOä¼˜åŒ– -->
    <meta name="description" content="Angela - Appleçº§åˆ«AIé©±åŠ¨çš„éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å·¥å…·ï¼Œä¸–ç•Œä¸€æµçš„ç”¨æˆ·ä½“éªŒ">
    <meta name="keywords" content="AIæ”¶å…¥è®¾è®¡,éåŠ³åŠ¡æ”¶å…¥,æ™ºèƒ½ç®¡é“,å•†ä¸šç­–ç•¥,Appleè®¾è®¡">
</head>
<body>
    <!-- Appleé£æ ¼å¯¼èˆªæ  -->
    <nav class="navigation-bar">
        <div class="nav-content">
            <a href="{{ url_for('index') }}" class="nav-brand">
                <i class="fas fa-brain"></i>
                Angela
            </a>
            <div class="nav-actions">
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-small">
                    <i class="fas fa-cog me-2"></i>ç®¡ç†ä¸­å¿ƒ
                </a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- é¡µé¢æ ‡é¢˜åŒºåŸŸ -->
        <header class="page-header fade-in">
            <h1 class="page-title">éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</h1>
            <p class="page-subtitle">æ ¹æ®æ‚¨çš„é¡¹ç›®å’Œå…³é”®äººç‰©ä¿¡æ¯ï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„éåŠ³åŠ¡æ”¶å…¥ç®¡é“æ–¹æ¡ˆ</p>
        </header>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div style="margin-bottom: var(--space-8);">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'error' if category == 'error' else 'info' }} slide-up">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- ä¸»è¦è¡¨å• -->
        <form method="POST" action="{{ url_for('generate') }}" id="mainForm" class="slide-up">
            
            <!-- é¡¹ç›®åŸºç¡€ä¿¡æ¯æ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.2s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-rocket"></i>
                        é¡¹ç›®åŸºç¡€ä¿¡æ¯
                    </h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="project_name" class="form-label">é¡¹ç›®åç§°</label>
                        <input type="text" class="form-control" id="project_name" name="project_name" 
                               placeholder="è¯·è¾“å…¥æ‚¨çš„é¡¹ç›®åç§°" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_description" class="form-label">é¡¹ç›®èƒŒæ™¯æè¿°</label>
                        <textarea class="form-control" id="project_description" name="project_description" 
                                  placeholder="è¯¦ç»†æè¿°æ‚¨çš„é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡å’Œç°çŠ¶..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_stage" class="form-label">é¡¹ç›®é˜¶æ®µ</label>
                        <select class="form-control" id="project_stage" name="project_stage">
                            <option value="">é€‰æ‹©é¡¹ç›®å½“å‰é˜¶æ®µ</option>
                            <option value="idea">æƒ³æ³•é˜¶æ®µ</option>
                            <option value="planning">è§„åˆ’é˜¶æ®µ</option>
                            <option value="development">å¼€å‘é˜¶æ®µ</option>
                            <option value="testing">æµ‹è¯•é˜¶æ®µ</option>
                            <option value="launch">å‡†å¤‡ä¸Šçº¿</option>
                            <option value="running">å·²ä¸Šçº¿è¿è¥</option>
                            <option value="scaling">è§„æ¨¡åŒ–æ‰©å±•</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- å…³é”®äººç‰©æ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.4s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-users"></i>
                        å…³é”®äººç‰©åˆ—è¡¨
                    </h3>
                </div>
                <div class="card-body">
                    <div id="personsContainer">
                        <!-- åˆå§‹äººç‰©å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="text-center mt-4" id="emptyState">
                        <p class="text-muted">
                            <i class="fas fa-users-slash"></i>
                            è¿˜æ²¡æœ‰æ·»åŠ å…³é”®äººç‰©ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ·»åŠ 
                        </p>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary interactive scale-in gpu-accelerated" onclick="addPerson()" style="animation-delay: 0.8s;">
                            <i class="fas fa-plus me-2"></i>
                            æ·»åŠ å…³é”®äººç‰©
                        </button>
                    </div>
                </div>
            </div>

            <!-- å¤–éƒ¨èµ„æºæ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.6s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-network-wired"></i>
                        å¤–éƒ¨èµ„æºä¸åˆä½œ
                    </h3>
                </div>
                <div class="card-body">
                    <label class="form-label">ä½ è¿˜æœ‰å“ªäº›å…¶ä»–èµ„æº</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æ”¿åºœè¡¥è´´">
                            <span>æ”¿åºœè¡¥è´´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ•èµ„æœºæ„">
                            <span>æŠ•èµ„æœºæ„</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åˆä½œä¼™ä¼´">
                            <span>åˆä½œä¼™ä¼´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¾›åº”é“¾">
                            <span>ä¾›åº”é“¾èµ„æº</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ€æœ¯å¹³å°">
                            <span>æŠ€æœ¯å¹³å°</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åª’ä½“æ¸ é“">
                            <span>åª’ä½“æ¸ é“</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="è¡Œä¸šåä¼š">
                            <span>è¡Œä¸šåä¼š</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¸“ä¸šæœåŠ¡">
                            <span>ä¸“ä¸šæœåŠ¡æœºæ„</span>
                        </label>
                    </div>
                    
                    <!-- å…¶ä»–èµ„æºè¾“å…¥ -->
                    <div class="form-group" style="margin-top: var(--space-6);">
                        <label class="checkbox-item">
                            <input type="checkbox" id="other_resource_checkbox" name="other_resource_checkbox">
                            <span>å…¶ä»–èµ„æº</span>
                        </label>
                        <input type="text" class="form-control" id="other_resource_text" name="other_resource_text" 
                               placeholder="è¯·æè¿°å…¶ä»–å¯ç”¨çš„å¤–éƒ¨èµ„æº..." style="margin-top: var(--space-3); display: none;">
                    </div>
                </div>
            </div>

            <!-- æäº¤æŒ‰é’® -->
            <div style="text-align: center; margin-top: 32px; padding-top: 24px; border-top: 1px solid rgba(0, 0, 0, 0.1);">
                <button type="submit" class="btn btn-primary btn-large interactive scale-in gpu-accelerated" style="animation-delay: 1.2s;">
                    <i class="fas fa-magic me-2"></i>
                    å¼€å§‹AIæ™ºèƒ½åˆ†æ
                </button>
                <p style="margin-top: 16px; color: #666; font-size: 14px; animation-delay: 1.5s;" class="fade-in">
                    åŸºäºæ‚¨æä¾›çš„ä¿¡æ¯ï¼ŒAIå°†åœ¨å‡ ç§’å†…ç”Ÿæˆä¸“ä¸šçš„æ”¶å…¥ç®¡é“è®¾è®¡æ–¹æ¡ˆ
                </p>
            </div>
        </form>
    </main>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/future-enhanced-interactions.js') }}"></script>
    <script>
        // äººç‰©è®¡æ•°å™¨
        let personCount = 0;
        
        // æ·»åŠ äººç‰©å¡ç‰‡
        function addPerson() {
            personCount++;
            const container = document.getElementById('personsContainer');
            
            const personCard = document.createElement('div');
            personCard.className = 'person-card slide-up';
            personCard.innerHTML = `
                <div class="person-card-header">
                    <div class="person-number">${personCount}</div>
                    <button type="button" class="remove-person-btn" onclick="removePerson(this)">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">äººç‰©ä»£å·/å§“å</label>
                    <input type="text" class="form-control" name="person_name[]" placeholder="ä¾‹å¦‚ï¼šAæ€»">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        èº«ä»½è§’è‰²ï¼ˆå¯å¤šé€‰ï¼‰
                        <span class="help-icon" data-tooltip="è¯·é€‰æ‹©è¯¥äººç‰©åœ¨é¡¹ç›®ä¸­çš„èº«ä»½è§’è‰²ï¼Œå¯é€‰æ‹©å¤šä¸ª">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </label>
                    <div class="role-selection-container">
                        <div class="role-checkbox-group">
                            <label class="checkbox-item role-item" data-desc="æœ‰éœ€æ±‚/æœ‰é¢„ç®—çš„ä¸€æ–¹ï¼Œé¡¹ç›®æœ€ç»ˆä¹°å•è€…æˆ–æå‡ºæ–¹ï¼ˆå¦‚ä¼ä¸šå®¢æˆ·ã€æ”¿åºœé‡‡è´­ï¼‰">
                                <input type="checkbox" name="person_role[]" value="buyer">
                                <span>éœ€æ±‚æ–¹ / é‡‡è´­æ–¹</span>
                                <div class="role-tooltip">æœ‰éœ€æ±‚/æœ‰é¢„ç®—çš„ä¸€æ–¹ï¼Œé¡¹ç›®æœ€ç»ˆä¹°å•è€…æˆ–æå‡ºæ–¹</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›èµ„é‡‘æˆ–èµåŠ©ï¼Œæ¢å–å›æŠ¥/åˆ†æ¶¦/æƒç›Šï¼ˆå¦‚VCã€å¤©ä½¿ã€å“ç‰ŒèµåŠ©å•†ï¼‰">
                                <input type="checkbox" name="person_role[]" value="investor">
                                <span>æŠ•èµ„æ–¹ / èµ„é‡‘æ–¹</span>
                                <div class="role-tooltip">æä¾›èµ„é‡‘æˆ–èµåŠ©ï¼Œæ¢å–å›æŠ¥/åˆ†æ¶¦/æƒç›Š</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›å¯é”€å”®çš„äº§å“æˆ–æœåŠ¡ï¼ˆå®ä½“æˆ–æ•°å­—ï¼‰ï¼Œå¯ä½œä¸ºå˜ç°è½½ä½“ï¼ˆå¦‚å“ç‰Œæ–¹ã€è¯¾ç¨‹/è½¯ä»¶æä¾›æ–¹ï¼‰">
                                <input type="checkbox" name="person_role[]" value="product">
                                <span>äº§å“æ–¹ / æœåŠ¡æ–¹</span>
                                <div class="role-tooltip">æä¾›å¯é”€å”®çš„äº§å“æˆ–æœåŠ¡ï¼Œå¯ä½œä¸ºå˜ç°è½½ä½“</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›åŸåˆ›å†…å®¹ã€IPæˆ–å½±å“åŠ›èµ„æºï¼Œå¯ç”¨äºå¼•æµä¸è”åï¼ˆå¦‚è‡ªåª’ä½“ã€ä½œå®¶ã€IPæ–¹ï¼‰">
                                <input type="checkbox" name="person_role[]" value="content">
                                <span>å†…å®¹æ–¹ / IPæ–¹</span>
                                <div class="role-tooltip">æä¾›åŸåˆ›å†…å®¹ã€IPæˆ–å½±å“åŠ›èµ„æºï¼Œå¯ç”¨äºå¼•æµä¸è”å</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="è´Ÿè´£è½åœ°ä¸äº§å‡ºç»“æœï¼ŒæŒ‰æ–¹æ¡ˆäº¤ä»˜ï¼ˆå¦‚æ´»åŠ¨æ‰§è¡Œå…¬å¸ã€ç ”å‘/åˆ¶ä½œå›¢é˜Ÿï¼‰">
                                <input type="checkbox" name="person_role[]" value="delivery">
                                <span>äº¤ä»˜æ–¹ / æ‰§è¡Œæ–¹</span>
                                <div class="role-tooltip">è´Ÿè´£è½åœ°ä¸äº§å‡ºç»“æœï¼ŒæŒ‰æ–¹æ¡ˆäº¤ä»˜</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æ‹¥æœ‰åˆ†å‘èƒ½åŠ›ï¼ŒæŠŠäº§å“/å†…å®¹æ¨å¹¿ç»™ç”¨æˆ·ï¼ˆå¦‚ä»£ç†å•†ã€ç”µå•†å¹³å°ã€ç¤¾ç¾¤ä¸»ã€åª’ä½“ï¼‰">
                                <input type="checkbox" name="person_role[]" value="channel">
                                <span>æ¸ é“æ–¹ / æ¨å¹¿æ–¹</span>
                                <div class="role-tooltip">æ‹¥æœ‰åˆ†å‘èƒ½åŠ›ï¼ŒæŠŠäº§å“/å†…å®¹æ¨å¹¿ç»™ç”¨æˆ·</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="è¿è¥å¹¶ç»´æŠ¤æŸå¹³å°/ç³»ç»Ÿ/å…¥å£ï¼ŒæŒæ§æµé‡ä¸è§„åˆ™ï¼ˆå¦‚APP/SaaS/åª’ä½“å¹³å°è¿è¥ï¼‰">
                                <input type="checkbox" name="person_role[]" value="ops">
                                <span>å¹³å°è¿è¥æ–¹</span>
                                <div class="role-tooltip">è¿è¥å¹¶ç»´æŠ¤æŸå¹³å°/ç³»ç»Ÿ/å…¥å£ï¼ŒæŒæ§æµé‡ä¸è§„åˆ™</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æ•´åˆå„æ–¹èµ„æºã€å®šèŠ‚å¥å¹¶æ¨åŠ¨è½åœ°çš„ç‰µå¤´è€…ï¼ˆå¦‚é¡¹ç›®ç»ç†ã€æ€»ç­–åˆ’ã€è¡Œä¸šåä¼šï¼‰">
                                <input type="checkbox" name="person_role[]" value="orchestrator">
                                <span>ç»Ÿç­¹æ–¹ / ç‰µå¤´æ–¹</span>
                                <div class="role-tooltip">æ•´åˆå„æ–¹èµ„æºã€å®šèŠ‚å¥å¹¶æ¨åŠ¨è½åœ°çš„ç‰µå¤´è€…</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›ä¸“ä¸šçŸ¥è¯†ã€èµ„è´¨æˆ–èƒŒä¹¦ï¼Œæé«˜å¯ä¿¡åº¦ï¼ˆå¦‚è¡Œä¸šé¡¾é—®ã€è®¤è¯æœºæ„ã€å¯¼å¸ˆï¼‰">
                                <input type="checkbox" name="person_role[]" value="expert">
                                <span>å¤–éƒ¨ä¸“å®¶ / é¡¾é—®</span>
                                <div class="role-tooltip">æä¾›ä¸“ä¸šçŸ¥è¯†ã€èµ„è´¨æˆ–èƒŒä¹¦ï¼Œæé«˜å¯ä¿¡åº¦</div>
                            </label>
                        </div>
                        <div class="selected-roles-summary" id="selectedRoles_\${personCount}">
                            <small class="text-muted">å°šæœªé€‰æ‹©è§’è‰²</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">æŒæ¡çš„èµ„æº</label>
                    <input type="text" class="form-control" name="person_resources[]" 
                           placeholder="è¯·ç”¨é€—å·åˆ†éš”å¤šä¸ªèµ„æºï¼Œä¾‹å¦‚ï¼šå“ç‰Œå†…å®¹èµ„æº,äº§å“åˆ†é”€æƒé™">
                </div>
                
                <div class="form-group">
                    <label class="form-label">å¦‚ä½•è®©æ­¤äººå¼€å¿ƒï¼ˆéœ€æ±‚/ç—›ç‚¹ï¼‰</label>
                    <div class="needs-selection-container">
                        <!-- é»˜è®¤æ˜¾ç¤ºçš„å‰ä¸¤ä¸ªåˆ†ç±» -->
                        <div class="needs-visible-section">
                            <!-- æƒ³çœ‹åˆ°å›æŠ¥ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-success); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-success); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¢</span>æƒ³çœ‹åˆ°å›æŠ¥ / å®é™…æ•ˆæœ
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–åœ¨æ„æŠ•å…¥å’Œäº§å‡ºï¼Œæœ‰æ˜ç¡®çš„"ç»“æœå¯¼å‘"ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="share_revenue">
                                        <span>æ‹¿åˆ°åˆ†æˆ/æŠ½æˆ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="bring_leads">
                                        <span>å¸¦æ¥å®¢æˆ·/ç”¨æˆ·</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="fast_execution">
                                        <span>é¡¹ç›®å°½å¿«è½åœ°</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="recurring_income">
                                        <span>èƒ½é•¿æœŸæŒç»­èµšé’±</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="use_idle_assets">
                                        <span>æœ‰èµ„æºè¢«ç”¨èµ·æ¥ï¼ˆä¸é—²ç½®ï¼‰</span>
                                    </label>
                                </div>
                            </div>

                            <!-- æƒ³è¢«çœ‹åˆ° -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-primary); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-primary); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”µ</span>æƒ³è¢«çœ‹åˆ° / è¢«å®£ä¼ 
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦æ›å…‰ã€è¦åå£°ï¼Œè€Œä¸”æœ€å¥½æ˜¯ç²¾å‡†æ›å…‰ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="brand_exposure">
                                        <span>æœ‰å“ç‰Œéœ²å‡ºï¼ˆçº¿ä¸Š/çº¿ä¸‹ï¼‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="build_expert_brand">
                                        <span>æ‰“é€ ä¸ªäººæ ‡ç­¾/ä¸“å®¶èº«ä»½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="targeted_exposure">
                                        <span>æ›å…‰åˆ°ç›®æ ‡åœˆå±‚</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="look_like_initiator">
                                        <span>é¡¹ç›®ä¸­çœ‹èµ·æ¥æ˜¯ä¸»å¯¼è€…</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- å±•å¼€æ—¶æ˜¾ç¤ºçš„å…¶ä»–åˆ†ç±» -->
                        <div class="needs-expandable-section" style="display: none;">
                            <!-- ä¸»å¯¼æ§åˆ¶ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-warning); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-warning); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¡</span>æƒ³ä¸»å¯¼é¡¹ç›® / æœ‰è¯è¯­æƒ
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦æŒæ§èŠ‚å¥ã€æ–¹å‘å’Œäººé€‰ï¼Œä¸æƒ³è¢«å½“å·¥å…·ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="control_pace">
                                        <span>è‡ªå·±å®šèŠ‚å¥</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="choose_partners">
                                        <span>å†³å®šå’Œè°åˆä½œ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="decide_content">
                                        <span>å†³å®šå†…å®¹/äº§å“æ€ä¹ˆåš</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="own_planning">
                                        <span>æœ‰å‘èµ·æƒ/ç­–åˆ’æƒ</span>
                                    </label>
                                </div>
                            </div>

                            <!-- é£é™©è§„é¿ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-error); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-error); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ </span>ä¸æƒ³å†’é£é™©
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–æƒ³å‚ä¸ï¼Œä½†ä¸èƒ½æœ‰é£é™©æˆ–æŸå¤±ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_money_no_liability">
                                        <span>ä¸å‡ºé’±ä¸æ‹…è´£</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_public_appearance">
                                        <span>ä¸å…¬å¼€éœ²è„¸</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_conflict_current_partner">
                                        <span>ä¸å½±å“å·²æœ‰åˆä½œæ–¹</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="keep_confidential">
                                        <span>ä¿è¯ä¿¡æ¯ä¿å¯†</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="stealth_mode">
                                        <span>å¯éšèº«å‚ä¸ï¼ˆä¸è¢«å¯¹æ‰‹çŸ¥é“ï¼‰</span>
                                    </label>
                                </div>
                            </div>

                            <!-- è¢«å°Šé‡ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-info); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-info); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”´</span>æƒ³è¢«å°Šé‡ / æœ‰åœ°ä½
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦èº«ä»½æ„Ÿã€é¢å­æ„Ÿå’Œåœˆå­è®¤å¯ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="be_consultant">
                                        <span>æˆä¸ºé¡¾é—®/ä¸“å®¶</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="be_recognized">
                                        <span>è¢«è®¤å¯å¾ˆé‡è¦</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="raise_status_in_circle">
                                        <span>æå‡åœ¨åœˆå­é‡Œçš„åœ°ä½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="as_initiator">
                                        <span>åƒæ˜¯ä»–å‘èµ·çš„å±€</span>
                                    </label>
                                </div>
                            </div>

                            <!-- äººè„‰æƒ…ç»ª -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-gray-700); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-700); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ£</span>åœ¨ä¹äººè„‰ / æ„Ÿå—
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–ä¸ºå…³ç³»ã€ä½“éªŒã€å‚ä¸æ„Ÿè€Œæ¥ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="expand_network">
                                        <span>æ‹“å±•äººè„‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="sense_of_participation">
                                        <span>æœ‰å‚ä¸æ„Ÿ/æˆå°±æ„Ÿ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="talk_value">
                                        <span>é¡¹ç›®èƒ½å½“ä½œè°ˆèµ„</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="feel_invited">
                                        <span>æœ‰è¢«é‚€è¯·çš„æ„Ÿè§‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="learn_info">
                                        <span>èƒ½æ¥è§¦åˆ°æ–°ä¿¡æ¯/å­¦åˆ°ä¸œè¥¿</span>
                                    </label>
                                </div>
                            </div>

                            <!-- å…¶ä»–è‡ªå®šä¹‰ -->
                            <div class="tag-group">
                                <h6 style="color: var(--color-gray-600); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-600); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">âœï¸</span>å…¶ä»–ï¼ˆå¯è¡¥å……æè¿°ï¼‰
                                </h6>
                                <textarea class="form-control" name="person_needs_extra[]" rows="2" 
                                          placeholder="è¿˜æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç‚¹ä¼šè®©ä»–æ„¿æ„å‚ä¸ï¼Ÿæ¯”å¦‚ï¼šè€æ¿åˆšæ‰¹é¢„ç®—ï¼Œæˆ–è€…æœ€è¿‘æƒ³å†²æ•°æ®..."></textarea>
                            </div>
                        </div>

                        <!-- å±•å¼€/æ”¶èµ·æŒ‰é’® -->
                        <div style="text-align: center; margin-top: var(--space-3);">
                            <button type="button" class="btn-outline expand-toggle-btn" style="font-size: var(--text-sm); padding: var(--space-1) var(--space-3);" onclick="toggleExpand(this)">
                                <i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(personCard);
            updateEmptyState();
            
            // åˆå§‹åŒ–è§’è‰²æç¤ºåŠŸèƒ½
            initRoleTooltips(personCard);
        }
        
        // åˆ é™¤äººç‰©å¡ç‰‡
        function removePerson(button) {
            const card = button.closest('.person-card');
            card.style.animation = 'slideUp 0.3s ease-out reverse';
            setTimeout(() => {
                card.remove();
                updatePersonNumbers();
                updateEmptyState();
            }, 300);
        }
        
        // æ›´æ–°äººç‰©ç¼–å·
        function updatePersonNumbers() {
            const cards = document.querySelectorAll('.person-card');
            cards.forEach((card, index) => {
                const numberElement = card.querySelector('.person-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
            personCount = cards.length;
        }
        
        // æ›´æ–°ç©ºçŠ¶æ€æ˜¾ç¤º
        function updateEmptyState() {
            const emptyState = document.getElementById('emptyState');
            const cards = document.querySelectorAll('.person-card');
            if (emptyState) {
                emptyState.style.display = cards.length === 0 ? 'block' : 'none';
            }
        }
        
        // åˆ‡æ¢å±•å¼€çŠ¶æ€
        function toggleExpand(button) {
            const container = button.closest('.needs-selection-container');
            const expandableSection = container.querySelector('.needs-expandable-section');
            const icon = button.querySelector('i');
            
            if (expandableSection.style.display === 'none') {
                expandableSection.style.display = 'block';
                icon.className = 'fas fa-angle-up me-1';
                button.innerHTML = '<i class="fas fa-angle-up me-1"></i>æ”¶èµ·é€‰é¡¹';
            } else {
                expandableSection.style.display = 'none';
                icon.className = 'fas fa-angle-down me-1';
                button.innerHTML = '<i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹';
            }
        }
        
        // å…¶ä»–èµ„æºå¤é€‰æ¡†åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const otherResourceCheckbox = document.getElementById('other_resource_checkbox');
            const otherResourceText = document.getElementById('other_resource_text');
            
            if (otherResourceCheckbox && otherResourceText) {
                otherResourceCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        otherResourceText.style.display = 'block';
                        otherResourceText.focus();
                    } else {
                        otherResourceText.style.display = 'none';
                        otherResourceText.value = '';
                    }
                });
            }
            
            // åˆå§‹åŒ–ç©ºçŠ¶æ€
            updateEmptyState();
        });
        
        // å¤„ç†å…¶ä»–èµ„æºè¾“å…¥æ¡†æ˜¾ç¤º
        document.getElementById('other_resource_checkbox').addEventListener('change', function() {
            const textInput = document.getElementById('other_resource_text');
            if (this.checked) {
                textInput.style.display = 'block';
                textInput.focus();
            } else {
                textInput.style.display = 'none';
                textInput.value = '';
            }
        });
        
        // åˆå§‹åŒ–è§’è‰²æç¤ºåŠŸèƒ½
        function initRoleTooltips(personCard) {
            const roleItems = personCard.querySelectorAll('.role-item');
            const summaryContainer = personCard.querySelector('.selected-roles-summary');
            
            roleItems.forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                
                // é€‰æ‹©å˜åŒ–æ—¶æ›´æ–°æ‘˜è¦
                checkbox.addEventListener('change', () => {
                    updateRolesSummary(personCard);
                });
            });
            
            // åˆå§‹æ›´æ–°æ‘˜è¦
            updateRolesSummary(personCard);
        }
        
        // æ›´æ–°å·²é€‰è§’è‰²æ‘˜è¦
        function updateRolesSummary(personCard) {
            const checkedItems = personCard.querySelectorAll('.role-item input[type="checkbox"]:checked');
            const summaryContainer = personCard.querySelector('.selected-roles-summary');
            const summaryText = summaryContainer.querySelector('small');
            
            if (checkedItems.length === 0) {
                summaryText.textContent = 'å°šæœªé€‰æ‹©è§’è‰²';
                summaryContainer.classList.remove('has-selection');
            } else if (checkedItems.length === 1) {
                const selectedItem = checkedItems[0].closest('.role-item');
                summaryText.textContent = `å·²é€‰æ‹©ï¼š${selectedItem.querySelector('span').textContent}`;
                summaryContainer.classList.add('has-selection');
            } else {
                const roleNames = Array.from(checkedItems).map(cb => 
                    cb.closest('.role-item').querySelector('span').textContent
                );
                summaryText.textContent = `å·²é€‰æ‹© ${checkedItems.length} ä¸ªè§’è‰²ï¼š${roleNames.join('ã€')}`;
                summaryContainer.classList.add('has-selection');
            }
        }
        
        // è¡¨å•æäº¤å‰éªŒè¯
        document.getElementById('mainForm').addEventListener('submit', function(e) {
            const projectName = document.getElementById('project_name').value.trim();
            const projectDescription = document.getElementById('project_description').value.trim();
            
            if (!projectName || !projectDescription) {
                e.preventDefault();
                alert('è¯·å¡«å†™é¡¹ç›®åç§°å’ŒèƒŒæ™¯æè¿°');
                return;
            }
            
            // æ·»åŠ æäº¤åŠ¨ç”»
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>æ­£åœ¨åˆ†æ...';
            submitBtn.disabled = true;
        });
        
        // é¡µé¢åŠ è½½æ—¶æ·»åŠ åˆå§‹äººç‰©å¡ç‰‡
        document.addEventListener('DOMContentLoaded', function() {
            addPerson();
        });
        
        // æ·»åŠ å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // æ·»åŠ è¾“å…¥æ¡†ç„¦ç‚¹åŠ¨ç”»
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
            });
        });
    </script>
</body>
</html>