<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angela Â· éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</title>
    
    <!-- é¢„åŠ è½½å…³é”®å­—ä½“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Appleçº§åˆ«è®¾è®¡ç³»ç»Ÿ -->
    <link href="{{ url_for('static', filename='css/apple-design-system.css') }}" rel="stylesheet">
    <!-- æœªæ¥ç§‘å¹»å¢å¼ºç‰ˆè®¾è®¡ç³»ç»Ÿ -->
    <link href="{{ url_for('static', filename='css/future-enhanced-apple.css') }}" rel="stylesheet">
    <!-- æŒ‰é’®ä¿®å¤æ ·å¼ -->
    <link href="{{ url_for('static', filename='css/button-fix.css') }}" rel="stylesheet">
    
    <!-- SEOä¼˜åŒ– -->
    <meta name="description" content="Angela - Appleçº§åˆ«AIé©±åŠ¨çš„éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å·¥å…·ï¼Œä¸–ç•Œä¸€æµçš„ç”¨æˆ·ä½“éªŒ">
    <meta name="keywords" content="AIæ”¶å…¥è®¾è®¡,éåŠ³åŠ¡æ”¶å…¥,æ™ºèƒ½ç®¡é“,å•†ä¸šç­–ç•¥,Appleè®¾è®¡">
</head>
<body>
    <!-- Appleé£æ ¼å¯¼èˆªæ  -->
    <nav class="navigation-bar">
        <div class="nav-content">
            <a href="{{ url_for('index') }}" class="nav-brand">
                <i class="fas fa-brain"></i>
                Angela
            </a>
            <div class="nav-actions">
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-small">
                    <i class="fas fa-cog me-2"></i>ç®¡ç†ä¸­å¿ƒ
                </a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <!-- é¡µé¢æ ‡é¢˜åŒºåŸŸ -->
        <header class="page-header fade-in">
            <h1 class="page-title">éåŠ³åŠ¡æ”¶å…¥ç®¡é“è®¾è®¡å¸ˆ</h1>
            <p class="page-subtitle">æ ¹æ®æ‚¨çš„é¡¹ç›®å’Œå…³é”®äººç‰©ä¿¡æ¯ï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„éåŠ³åŠ¡æ”¶å…¥ç®¡é“æ–¹æ¡ˆ</p>
        </header>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div style="margin-bottom: var(--space-8);">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'error' if category == 'error' else 'info' }} slide-up">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- ä¸»è¦è¡¨å• -->
        <form method="POST" action="{{ url_for('generate') }}" id="mainForm" class="slide-up">
            
            <!-- é¡¹ç›®åŸºç¡€ä¿¡æ¯æ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.2s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-rocket"></i>
                        é¡¹ç›®åŸºç¡€ä¿¡æ¯
                    </h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="project_name" class="form-label">é¡¹ç›®åç§°</label>
                        <input type="text" class="form-control" id="project_name" name="project_name" 
                               placeholder="è¯·è¾“å…¥æ‚¨çš„é¡¹ç›®åç§°" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_description" class="form-label">é¡¹ç›®èƒŒæ™¯æè¿°</label>
                        <textarea class="form-control" id="project_description" name="project_description" 
                                  placeholder="è¯¦ç»†æè¿°æ‚¨çš„é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡å’Œç°çŠ¶..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_stage" class="form-label">é¡¹ç›®é˜¶æ®µ</label>
                        <select class="form-control" id="project_stage" name="project_stage">
                            <option value="">é€‰æ‹©é¡¹ç›®å½“å‰é˜¶æ®µ</option>
                            <option value="idea">æƒ³æ³•é˜¶æ®µ</option>
                            <option value="planning">è§„åˆ’é˜¶æ®µ</option>
                            <option value="development">å¼€å‘é˜¶æ®µ</option>
                            <option value="testing">æµ‹è¯•é˜¶æ®µ</option>
                            <option value="launch">å‡†å¤‡ä¸Šçº¿</option>
                            <option value="running">å·²ä¸Šçº¿è¿è¥</option>
                            <option value="scaling">è§„æ¨¡åŒ–æ‰©å±•</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- å…³é”®äººç‰©æ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.4s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-users"></i>
                        å…³é”®äººç‰©åˆ—è¡¨
                    </h3>
                </div>
                <div class="card-body">
                    <div id="personsContainer">
                        <!-- åˆå§‹äººç‰©å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="text-center mt-4" id="emptyState">
                        <p class="text-muted">
                            <i class="fas fa-users-slash"></i>
                            è¿˜æ²¡æœ‰æ·»åŠ å…³é”®äººç‰©ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ·»åŠ 
                        </p>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary interactive scale-in gpu-accelerated" onclick="addPerson()" style="animation-delay: 0.8s;">
                            <i class="fas fa-plus me-2"></i>
                            æ·»åŠ å…³é”®äººç‰©
                        </button>
                    </div>
                </div>
            </div>

            <!-- å¤–éƒ¨èµ„æºæ¨¡å— -->
            <div class="card fade-in interactive-hover" style="animation-delay: 0.6s;">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-network-wired"></i>
                        å¤–éƒ¨èµ„æºä¸åˆä½œ
                    </h3>
                </div>
                <div class="card-body">
                    <label class="form-label">ä½ è¿˜æœ‰å“ªäº›å…¶ä»–èµ„æº</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æ”¿åºœè¡¥è´´">
                            <span>æ”¿åºœè¡¥è´´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ•èµ„æœºæ„">
                            <span>æŠ•èµ„æœºæ„</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åˆä½œä¼™ä¼´">
                            <span>åˆä½œä¼™ä¼´</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¾›åº”é“¾">
                            <span>ä¾›åº”é“¾èµ„æº</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="æŠ€æœ¯å¹³å°">
                            <span>æŠ€æœ¯å¹³å°</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="åª’ä½“æ¸ é“">
                            <span>åª’ä½“æ¸ é“</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="è¡Œä¸šåä¼š">
                            <span>è¡Œä¸šåä¼š</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="external_resources" value="ä¸“ä¸šæœåŠ¡">
                            <span>ä¸“ä¸šæœåŠ¡æœºæ„</span>
                        </label>
                    </div>
                    
                    <!-- å…¶ä»–èµ„æºè¾“å…¥ -->
                    <div class="form-group" style="margin-top: var(--space-6);">
                        <label class="checkbox-item">
                            <input type="checkbox" id="other_resource_checkbox" name="other_resource_checkbox">
                            <span>å…¶ä»–èµ„æº</span>
                        </label>
                        <input type="text" class="form-control" id="other_resource_text" name="other_resource_text" 
                               placeholder="è¯·æè¿°å…¶ä»–å¯ç”¨çš„å¤–éƒ¨èµ„æº..." style="margin-top: var(--space-3); display: none;">
                    </div>
                </div>
            </div>

            <!-- æäº¤æŒ‰é’® -->
            <div style="text-align: center; margin-top: 32px; padding-top: 24px; border-top: 1px solid rgba(0, 0, 0, 0.1);">
                <button type="submit" class="btn btn-primary btn-large interactive scale-in gpu-accelerated" style="animation-delay: 1.2s;">
                    <i class="fas fa-magic me-2"></i>
                    å¼€å§‹AIæ™ºèƒ½åˆ†æ
                </button>
                <p style="margin-top: 16px; color: #666; font-size: 14px; animation-delay: 1.5s;" class="fade-in">
                    åŸºäºæ‚¨æä¾›çš„ä¿¡æ¯ï¼ŒAIå°†åœ¨å‡ ç§’å†…ç”Ÿæˆä¸“ä¸šçš„æ”¶å…¥ç®¡é“è®¾è®¡æ–¹æ¡ˆ
                </p>
            </div>
        </form>
    </main>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/future-enhanced-interactions.js') }}"></script>
    <script>
        // äººç‰©è®¡æ•°å™¨
        let personCount = 0;
        
        // æ·»åŠ äººç‰©å¡ç‰‡
        function addPerson() {
            personCount++;
            const container = document.getElementById('personsContainer');
            
            const personCard = document.createElement('div');
            personCard.className = 'person-card slide-up';
            personCard.innerHTML = `
                <div class="person-card-header">
                    <div class="person-number">${personCount}</div>
                    <button type="button" class="remove-person-btn" onclick="removePerson(this)">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">äººç‰©ä»£å·/å§“å</label>
                    <input type="text" class="form-control" name="person_name[]" placeholder="ä¾‹å¦‚ï¼šAæ€»">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        èº«ä»½è§’è‰²ï¼ˆå¯å¤šé€‰ï¼‰
                        <span class="help-icon" data-tooltip="è¯·é€‰æ‹©è¯¥äººç‰©åœ¨é¡¹ç›®ä¸­çš„èº«ä»½è§’è‰²ï¼Œå¯é€‰æ‹©å¤šä¸ª">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </label>
                    <div class="role-selection-container">
                        <div class="role-checkbox-group">
                            <label class="checkbox-item role-item" data-desc="æœ‰éœ€æ±‚/æœ‰é¢„ç®—çš„ä¸€æ–¹ï¼Œé¡¹ç›®æœ€ç»ˆä¹°å•è€…æˆ–æå‡ºæ–¹ï¼ˆå¦‚ä¼ä¸šå®¢æˆ·ã€æ”¿åºœé‡‡è´­ï¼‰">
                                <input type="checkbox" name="person_role[]" value="buyer">
                                <span>éœ€æ±‚æ–¹ / é‡‡è´­æ–¹</span>
                                <div class="role-tooltip">æœ‰éœ€æ±‚/æœ‰é¢„ç®—çš„ä¸€æ–¹ï¼Œé¡¹ç›®æœ€ç»ˆä¹°å•è€…æˆ–æå‡ºæ–¹</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›èµ„é‡‘æˆ–èµåŠ©ï¼Œæ¢å–å›æŠ¥/åˆ†æ¶¦/æƒç›Šï¼ˆå¦‚VCã€å¤©ä½¿ã€å“ç‰ŒèµåŠ©å•†ï¼‰">
                                <input type="checkbox" name="person_role[]" value="investor">
                                <span>æŠ•èµ„æ–¹ / èµ„é‡‘æ–¹</span>
                                <div class="role-tooltip">æä¾›èµ„é‡‘æˆ–èµåŠ©ï¼Œæ¢å–å›æŠ¥/åˆ†æ¶¦/æƒç›Š</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›å¯é”€å”®çš„äº§å“æˆ–æœåŠ¡ï¼ˆå®ä½“æˆ–æ•°å­—ï¼‰ï¼Œå¯ä½œä¸ºå˜ç°è½½ä½“ï¼ˆå¦‚å“ç‰Œæ–¹ã€è¯¾ç¨‹/è½¯ä»¶æä¾›æ–¹ï¼‰">
                                <input type="checkbox" name="person_role[]" value="product">
                                <span>äº§å“æ–¹ / æœåŠ¡æ–¹</span>
                                <div class="role-tooltip">æä¾›å¯é”€å”®çš„äº§å“æˆ–æœåŠ¡ï¼Œå¯ä½œä¸ºå˜ç°è½½ä½“</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›åŸåˆ›å†…å®¹ã€IPæˆ–å½±å“åŠ›èµ„æºï¼Œå¯ç”¨äºå¼•æµä¸è”åï¼ˆå¦‚è‡ªåª’ä½“ã€ä½œå®¶ã€IPæ–¹ï¼‰">
                                <input type="checkbox" name="person_role[]" value="content">
                                <span>å†…å®¹æ–¹ / IPæ–¹</span>
                                <div class="role-tooltip">æä¾›åŸåˆ›å†…å®¹ã€IPæˆ–å½±å“åŠ›èµ„æºï¼Œå¯ç”¨äºå¼•æµä¸è”å</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="è´Ÿè´£è½åœ°ä¸äº§å‡ºç»“æœï¼ŒæŒ‰æ–¹æ¡ˆäº¤ä»˜ï¼ˆå¦‚æ´»åŠ¨æ‰§è¡Œå…¬å¸ã€ç ”å‘/åˆ¶ä½œå›¢é˜Ÿï¼‰">
                                <input type="checkbox" name="person_role[]" value="delivery">
                                <span>äº¤ä»˜æ–¹ / æ‰§è¡Œæ–¹</span>
                                <div class="role-tooltip">è´Ÿè´£è½åœ°ä¸äº§å‡ºç»“æœï¼ŒæŒ‰æ–¹æ¡ˆäº¤ä»˜</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æ‹¥æœ‰åˆ†å‘èƒ½åŠ›ï¼ŒæŠŠäº§å“/å†…å®¹æ¨å¹¿ç»™ç”¨æˆ·ï¼ˆå¦‚ä»£ç†å•†ã€ç”µå•†å¹³å°ã€ç¤¾ç¾¤ä¸»ã€åª’ä½“ï¼‰">
                                <input type="checkbox" name="person_role[]" value="channel">
                                <span>æ¸ é“æ–¹ / æ¨å¹¿æ–¹</span>
                                <div class="role-tooltip">æ‹¥æœ‰åˆ†å‘èƒ½åŠ›ï¼ŒæŠŠäº§å“/å†…å®¹æ¨å¹¿ç»™ç”¨æˆ·</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="è¿è¥å¹¶ç»´æŠ¤æŸå¹³å°/ç³»ç»Ÿ/å…¥å£ï¼ŒæŒæ§æµé‡ä¸è§„åˆ™ï¼ˆå¦‚APP/SaaS/åª’ä½“å¹³å°è¿è¥ï¼‰">
                                <input type="checkbox" name="person_role[]" value="ops">
                                <span>å¹³å°è¿è¥æ–¹</span>
                                <div class="role-tooltip">è¿è¥å¹¶ç»´æŠ¤æŸå¹³å°/ç³»ç»Ÿ/å…¥å£ï¼ŒæŒæ§æµé‡ä¸è§„åˆ™</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æ•´åˆå„æ–¹èµ„æºã€å®šèŠ‚å¥å¹¶æ¨åŠ¨è½åœ°çš„ç‰µå¤´è€…ï¼ˆå¦‚é¡¹ç›®ç»ç†ã€æ€»ç­–åˆ’ã€è¡Œä¸šåä¼šï¼‰">
                                <input type="checkbox" name="person_role[]" value="orchestrator">
                                <span>ç»Ÿç­¹æ–¹ / ç‰µå¤´æ–¹</span>
                                <div class="role-tooltip">æ•´åˆå„æ–¹èµ„æºã€å®šèŠ‚å¥å¹¶æ¨åŠ¨è½åœ°çš„ç‰µå¤´è€…</div>
                            </label>
                            <label class="checkbox-item role-item" data-desc="æä¾›ä¸“ä¸šçŸ¥è¯†ã€èµ„è´¨æˆ–èƒŒä¹¦ï¼Œæé«˜å¯ä¿¡åº¦ï¼ˆå¦‚è¡Œä¸šé¡¾é—®ã€è®¤è¯æœºæ„ã€å¯¼å¸ˆï¼‰">
                                <input type="checkbox" name="person_role[]" value="expert">
                                <span>å¤–éƒ¨ä¸“å®¶ / é¡¾é—®</span>
                                <div class="role-tooltip">æä¾›ä¸“ä¸šçŸ¥è¯†ã€èµ„è´¨æˆ–èƒŒä¹¦ï¼Œæé«˜å¯ä¿¡åº¦</div>
                            </label>
                        </div>
                        <div class="selected-roles-summary" id="selectedRoles_\${personCount}">
                            <small class="text-muted">å°šæœªé€‰æ‹©è§’è‰²</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">æŒæ¡çš„èµ„æºï¼ˆå¿…å¡« â‰¥ 1ï¼‰</label>
                    <p class="resource-hint">ä»–ç°åœ¨å°±èƒ½è°ƒåŠ¨çš„å…·ä½“ä¸œè¥¿ï¼ˆå¸¦å¹³å°/æ•°é‡/å¯¹è±¡/æƒé™ï¼‰ï¼Œç”¨äºæ­å»ºè·¯å¾„ã€‚</p>
                    
                    <!-- å€™é€‰èµ„æºæ ‡ç­¾åŒº -->
                    <div class="resource-suggestions-container" id="resourceSuggestions_\${personCount}">
                        <div class="resource-suggestions-scroll">
                            <!-- åŠ¨æ€ç”Ÿæˆçš„å€™é€‰æ ‡ç­¾ -->
                        </div>
                    </div>
                    
                    <!-- è‡ªç”±è¾“å…¥æ¡† -->
                    <div class="resource-input-container">
                        <input type="text" class="form-control resource-input dynamic-placeholder-resource" 
                               placeholder="å¾®ä¿¡ç¤¾ç¾¤5ä¸ªã€è§†é¢‘å·10ä¸‡ç²‰ã€å¹´åº¦å¹¿å‘Šé¢„ç®—50ä¸‡ã€äº§å“è¯•ç”¨ç 100ä¸ªã€æ´»åŠ¨åœºåœ°ä¸€å¤©ã€å“ç‰Œå¯¹æ¥äººï¼šXX"
                               data-person-id="\${personCount}">
                        <button type="button" class="resource-example-btn" onclick="addResourceExample(this)">
                            <i class="fas fa-magic"></i> ä¸€é”®ç¤ºä¾‹
                        </button>
                    </div>
                    
                    <!-- å·²é€‰èµ„æºæ ‡ç­¾åŒº -->
                    <div class="selected-resources-container empty" id="selectedResources_\${personCount}">
                        <!-- å·²é€‰æ ‡ç­¾å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                    </div>
                    
                    <!-- éšè—å­—æ®µå­˜å‚¨æœ€ç»ˆæ•°æ® -->
                    <input type="hidden" name="person_resources[]" class="resources-data">
                    
                    <!-- å¼±æç¤º -->
                    <div class="resource-tip">
                        <small class="text-muted">ğŸ’¡ èº«ä»½=ä½ç½®ï¼›èµ„æº=å¯è°ƒç”¨çš„'å…·ä½“ä¸œè¥¿'ã€‚</small>
                    </div>
                    
                    <!-- éªŒè¯æç¤ºåŒºåŸŸ -->
                    <div class="resource-validation" id="resourceValidation_\${personCount}" style="display: none;">
                        <!-- éªŒè¯æç¤ºä¿¡æ¯ -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å¦‚ä½•è®©æ­¤äººå¼€å¿ƒï¼ˆéœ€æ±‚/ç—›ç‚¹ï¼‰</label>
                    <div class="needs-selection-container">
                        <!-- é»˜è®¤æ˜¾ç¤ºçš„å‰ä¸¤ä¸ªåˆ†ç±» -->
                        <div class="needs-visible-section">
                            <!-- æƒ³çœ‹åˆ°å›æŠ¥ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-success); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-success); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¢</span>æƒ³çœ‹åˆ°å›æŠ¥ / å®é™…æ•ˆæœ
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–åœ¨æ„æŠ•å…¥å’Œäº§å‡ºï¼Œæœ‰æ˜ç¡®çš„"ç»“æœå¯¼å‘"ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="share_revenue">
                                        <span>æ‹¿åˆ°åˆ†æˆ/æŠ½æˆ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="bring_leads">
                                        <span>å¸¦æ¥å®¢æˆ·/ç”¨æˆ·</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="fast_execution">
                                        <span>é¡¹ç›®å°½å¿«è½åœ°</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="recurring_income">
                                        <span>èƒ½é•¿æœŸæŒç»­èµšé’±</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="use_idle_assets">
                                        <span>æœ‰èµ„æºè¢«ç”¨èµ·æ¥ï¼ˆä¸é—²ç½®ï¼‰</span>
                                    </label>
                                </div>
                            </div>

                            <!-- æƒ³è¢«çœ‹åˆ° -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-primary); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-primary); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”µ</span>æƒ³è¢«çœ‹åˆ° / è¢«å®£ä¼ 
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦æ›å…‰ã€è¦åå£°ï¼Œè€Œä¸”æœ€å¥½æ˜¯ç²¾å‡†æ›å…‰ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="brand_exposure">
                                        <span>æœ‰å“ç‰Œéœ²å‡ºï¼ˆçº¿ä¸Š/çº¿ä¸‹ï¼‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="build_expert_brand">
                                        <span>æ‰“é€ ä¸ªäººæ ‡ç­¾/ä¸“å®¶èº«ä»½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="targeted_exposure">
                                        <span>æ›å…‰åˆ°ç›®æ ‡åœˆå±‚</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="look_like_initiator">
                                        <span>é¡¹ç›®ä¸­çœ‹èµ·æ¥æ˜¯ä¸»å¯¼è€…</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- å±•å¼€æ—¶æ˜¾ç¤ºçš„å…¶ä»–åˆ†ç±» -->
                        <div class="needs-expandable-section" style="display: none;">
                            <!-- ä¸»å¯¼æ§åˆ¶ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-warning); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-warning); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ¡</span>æƒ³ä¸»å¯¼é¡¹ç›® / æœ‰è¯è¯­æƒ
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦æŒæ§èŠ‚å¥ã€æ–¹å‘å’Œäººé€‰ï¼Œä¸æƒ³è¢«å½“å·¥å…·ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="control_pace">
                                        <span>è‡ªå·±å®šèŠ‚å¥</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="choose_partners">
                                        <span>å†³å®šå’Œè°åˆä½œ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="decide_content">
                                        <span>å†³å®šå†…å®¹/äº§å“æ€ä¹ˆåš</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="own_planning">
                                        <span>æœ‰å‘èµ·æƒ/ç­–åˆ’æƒ</span>
                                    </label>
                                </div>
                            </div>

                            <!-- é£é™©è§„é¿ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-error); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-error); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ </span>ä¸æƒ³å†’é£é™©
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–æƒ³å‚ä¸ï¼Œä½†ä¸èƒ½æœ‰é£é™©æˆ–æŸå¤±ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_money_no_liability">
                                        <span>ä¸å‡ºé’±ä¸æ‹…è´£</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_public_appearance">
                                        <span>ä¸å…¬å¼€éœ²è„¸</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="no_conflict_current_partner">
                                        <span>ä¸å½±å“å·²æœ‰åˆä½œæ–¹</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="keep_confidential">
                                        <span>ä¿è¯ä¿¡æ¯ä¿å¯†</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="stealth_mode">
                                        <span>å¯éšèº«å‚ä¸ï¼ˆä¸è¢«å¯¹æ‰‹çŸ¥é“ï¼‰</span>
                                    </label>
                                </div>
                            </div>

                            <!-- è¢«å°Šé‡ -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-info); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-info); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸ”´</span>æƒ³è¢«å°Šé‡ / æœ‰åœ°ä½
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–è¦èº«ä»½æ„Ÿã€é¢å­æ„Ÿå’Œåœˆå­è®¤å¯ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="be_consultant">
                                        <span>æˆä¸ºé¡¾é—®/ä¸“å®¶</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="be_recognized">
                                        <span>è¢«è®¤å¯å¾ˆé‡è¦</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="raise_status_in_circle">
                                        <span>æå‡åœ¨åœˆå­é‡Œçš„åœ°ä½</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="as_initiator">
                                        <span>åƒæ˜¯ä»–å‘èµ·çš„å±€</span>
                                    </label>
                                </div>
                            </div>

                            <!-- äººè„‰æƒ…ç»ª -->
                            <div class="tag-group" style="margin-bottom: var(--space-3);">
                                <h6 style="color: var(--color-gray-700); margin-bottom: var(--space-1); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-700); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">ğŸŸ£</span>åœ¨ä¹äººè„‰ / æ„Ÿå—
                                </h6>
                                <p style="color: var(--color-gray-600); font-size: var(--text-xs); margin-bottom: var(--space-2); font-style: italic; padding-left: 20px;">ä»–ä¸ºå…³ç³»ã€ä½“éªŒã€å‚ä¸æ„Ÿè€Œæ¥ã€‚</p>
                                <div class="checkbox-group">
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="expand_network">
                                        <span>æ‹“å±•äººè„‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="sense_of_participation">
                                        <span>æœ‰å‚ä¸æ„Ÿ/æˆå°±æ„Ÿ</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="talk_value">
                                        <span>é¡¹ç›®èƒ½å½“ä½œè°ˆèµ„</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="feel_invited">
                                        <span>æœ‰è¢«é‚€è¯·çš„æ„Ÿè§‰</span>
                                    </label>
                                    <label class="checkbox-tag">
                                        <input type="checkbox" name="person_needs[]" value="learn_info">
                                        <span>èƒ½æ¥è§¦åˆ°æ–°ä¿¡æ¯/å­¦åˆ°ä¸œè¥¿</span>
                                    </label>
                                </div>
                            </div>

                            <!-- å…¶ä»–è‡ªå®šä¹‰ -->
                            <div class="tag-group">
                                <h6 style="color: var(--color-gray-600); margin-bottom: var(--space-2); font-size: var(--text-sm); font-weight: var(--font-semibold);">
                                    <span style="background: var(--color-gray-600); color: white; padding: 2px 6px; border-radius: var(--radius-sm); margin-right: var(--space-1); font-size: 10px;">âœï¸</span>å…¶ä»–ï¼ˆå¯è¡¥å……æè¿°ï¼‰
                                </h6>
                                <div class="other-input-container">
                                    <textarea class="form-control dynamic-placeholder-textarea" name="person_needs_extra[]" rows="2" 
                                              placeholder="è¿˜æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç‚¹ä¼šè®©ä»–æ„¿æ„å‚ä¸ï¼Ÿ"></textarea>
                                    <button type="button" class="inspiration-btn" onclick="showInspirationModal(this)">
                                        <i class="fas fa-lightbulb"></i> çµæ„Ÿ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- å±•å¼€/æ”¶èµ·æŒ‰é’® -->
                        <div style="text-align: center; margin-top: var(--space-3);">
                            <button type="button" class="btn-outline expand-toggle-btn" style="font-size: var(--text-sm); padding: var(--space-1) var(--space-3);" onclick="toggleExpand(this)">
                                <i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(personCard);
            updateEmptyState();
            
            // åˆå§‹åŒ–è§’è‰²æç¤ºåŠŸèƒ½
            initRoleTooltips(personCard);
            
            // åˆå§‹åŒ–èµ„æºè¾“å…¥åŠŸèƒ½
            initResourceInput(personCard);
            
            // ç›‘å¬è§’è‰²å˜åŒ–æ›´æ–°èµ„æºæ¨è
            const roleCheckboxes = personCard.querySelectorAll('input[name="person_role[]"]');
            roleCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    updateResourceSuggestions(personCard);
                    updateRoleSummary(personCard);
                });
            });
            
            // åˆå§‹åŒ–èµ„æºæ¨èï¼ˆæ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼‰
            updateResourceSuggestions(personCard);
            
            // ä¸ºæ–°å¡ç‰‡è®¾ç½®éšæœºæç¤ºè¯­
            setRandomPlaceholder();
        }
        
        // åˆ é™¤äººç‰©å¡ç‰‡
        function removePerson(button) {
            const card = button.closest('.person-card');
            card.style.animation = 'slideUp 0.3s ease-out reverse';
            setTimeout(() => {
                card.remove();
                updatePersonNumbers();
                updateEmptyState();
            }, 300);
        }
        
        // æ›´æ–°äººç‰©ç¼–å·
        function updatePersonNumbers() {
            const cards = document.querySelectorAll('.person-card');
            cards.forEach((card, index) => {
                const numberElement = card.querySelector('.person-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
            personCount = cards.length;
        }
        
        // æ›´æ–°ç©ºçŠ¶æ€æ˜¾ç¤º
        function updateEmptyState() {
            const emptyState = document.getElementById('emptyState');
            const cards = document.querySelectorAll('.person-card');
            if (emptyState) {
                emptyState.style.display = cards.length === 0 ? 'block' : 'none';
            }
        }
        
        // åˆ‡æ¢å±•å¼€çŠ¶æ€
        function toggleExpand(button) {
            const container = button.closest('.needs-selection-container');
            const expandableSection = container.querySelector('.needs-expandable-section');
            const icon = button.querySelector('i');
            
            if (expandableSection.style.display === 'none') {
                expandableSection.style.display = 'block';
                icon.className = 'fas fa-angle-up me-1';
                button.innerHTML = '<i class="fas fa-angle-up me-1"></i>æ”¶èµ·é€‰é¡¹';
            } else {
                expandableSection.style.display = 'none';
                icon.className = 'fas fa-angle-down me-1';
                button.innerHTML = '<i class="fas fa-angle-down me-1"></i>å±•å¼€æ›´å¤šé€‰é¡¹';
            }
        }
        
        // å…¶ä»–èµ„æºå¤é€‰æ¡†åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const otherResourceCheckbox = document.getElementById('other_resource_checkbox');
            const otherResourceText = document.getElementById('other_resource_text');
            
            if (otherResourceCheckbox && otherResourceText) {
                otherResourceCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        otherResourceText.style.display = 'block';
                        otherResourceText.focus();
                    } else {
                        otherResourceText.style.display = 'none';
                        otherResourceText.value = '';
                    }
                });
            }
            
            // åˆå§‹åŒ–ç©ºçŠ¶æ€
            updateEmptyState();
            
            // åˆå§‹åŒ–åŠ¨æ€æç¤ºè¯­
            setRandomPlaceholder();
        });
        
        // å¤„ç†å…¶ä»–èµ„æºè¾“å…¥æ¡†æ˜¾ç¤º
        document.getElementById('other_resource_checkbox').addEventListener('change', function() {
            const textInput = document.getElementById('other_resource_text');
            if (this.checked) {
                textInput.style.display = 'block';
                textInput.focus();
            } else {
                textInput.style.display = 'none';
                textInput.value = '';
            }
        });
        
        // åˆå§‹åŒ–è§’è‰²æç¤ºåŠŸèƒ½
        function initRoleTooltips(personCard) {
            const roleItems = personCard.querySelectorAll('.role-item');
            const summaryContainer = personCard.querySelector('.selected-roles-summary');
            
            roleItems.forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                
                // é€‰æ‹©å˜åŒ–æ—¶æ›´æ–°æ‘˜è¦
                checkbox.addEventListener('change', () => {
                    updateRolesSummary(personCard);
                });
            });
            
            // åˆå§‹æ›´æ–°æ‘˜è¦
            updateRolesSummary(personCard);
        }
        
        // æ›´æ–°å·²é€‰è§’è‰²æ‘˜è¦
        function updateRolesSummary(personCard) {
            const checkedItems = personCard.querySelectorAll('.role-item input[type="checkbox"]:checked');
            const summaryContainer = personCard.querySelector('.selected-roles-summary');
            const summaryText = summaryContainer.querySelector('small');
            
            if (checkedItems.length === 0) {
                summaryText.textContent = 'å°šæœªé€‰æ‹©è§’è‰²';
                summaryContainer.classList.remove('has-selection');
            } else if (checkedItems.length === 1) {
                const selectedItem = checkedItems[0].closest('.role-item');
                summaryText.textContent = `å·²é€‰æ‹©ï¼š${selectedItem.querySelector('span').textContent}`;
                summaryContainer.classList.add('has-selection');
            } else {
                const roleNames = Array.from(checkedItems).map(cb => 
                    cb.closest('.role-item').querySelector('span').textContent
                );
                summaryText.textContent = `å·²é€‰æ‹© ${checkedItems.length} ä¸ªè§’è‰²ï¼š${roleNames.join('ã€')}`;
                summaryContainer.classList.add('has-selection');
            }
        }
        
        // è§’è‰²åˆ°èµ„æºçš„æ˜ å°„
        const roleToResourceSuggestions = {
            "buyer": ["é‡‡è´­é¢„ç®—", "é¡¹ç›®ç«‹é¡¹æƒ", "ç­¾çº¦æƒé™", "å†…éƒ¨å®£ä¼ ä½", "ç›®æ ‡å®¢æˆ·åå•"],
            "investor": ["èµåŠ©é¢åº¦", "ç°é‡‘é¢„ç®—", "æŠ•åæœåŠ¡æ¸ é“", "æŠ•å§”ä¼šèƒŒä¹¦", "è·¯æ¼”åé¢"],
            "product": ["äº§å“è¯•ç”¨åé¢", "æ ·å“/å…‘æ¢ç ", "åˆ†é”€ä»·æƒé™", "å”®å/å®¢æœæ”¯æŒ", "API/SDKæˆæƒ"],
            "content": ["å…¬ä¼—å·/è§†é¢‘å·/æŠ–éŸ³å·Xç²‰", "ç‰ˆæƒæˆæƒ", "ä¸“æ /æ’­å®¢ä½", "å†…å®¹åˆ¶ä½œå›¢é˜Ÿ", "ç´ æåº“"],
            "delivery": ["æ‰§è¡Œå›¢é˜Ÿç¼–åˆ¶", "è®¾è®¡/æ‹æ‘„/ç ”å‘èƒ½åŠ›", "ä¾›åº”é“¾/æ–½å·¥é˜Ÿ", "åˆ¶ä½œ/äº¤ä»˜SOP", "æ­å»ºå·¥å…·/æ¨¡æ¿"],
            "channel": ["ç¤¾ç¾¤Xä¸ª", "ç§åŸŸå¥½å‹æ•°X", "åª’ä½“æŠ•æ”¾ä½", "ç”µå•†æ¸ é“ä½", "çº¿ä¸‹é—¨åº—/å±•ä½"],
            "ops": ["APP/å°ç¨‹åºå…¥å£ä½", "Push/å¼¹çª—ä½", "é¢‘é“/ä¸“é¢˜é¡µ", "æ•°æ®çœ‹æ¿è®¿é—®", "å®¢æœä½“ç³»æ¥å…¥"],
            "orchestrator": ["è·¨æ–¹å¯¹æ¥æƒ", "é¡¹ç›®æ’æœŸæ§åˆ¶", "åˆåŒæ¨¡æ¿/æ³•åŠ¡æ¥å£", "è¡Œä¸šåä¼šå…³ç³»", "å†…æ¨ç™½åå•"],
            "expert": ["ä¸“ä¸šè®¤è¯/èµ„è´¨", "é¡¾é—®èƒŒä¹¦", "è¯„å®¡åé¢", "åŸ¹è®­è¯¾ç¨‹", "è¡Œä¸šäººè„‰å›¾è°±"]
        };
        
        // èµ„æºç¤ºä¾‹æ¨¡æ¿
        const resourceExamples = [
            ["è§†é¢‘å·8ä¸‡ç²‰", "ç¤¾ç¾¤2ä¸ª", "å“ç‰Œå¯¹æ¥äººï¼šæœ¬åœ°å’–å•¡è¿é”"],
            ["SaaSè¯•ç”¨åé¢100ä¸ª", "APIæˆæƒï¼ˆ14å¤©ï¼‰", "å®æ–½å›¢é˜Ÿ2äºº/2å‘¨"],
            ["èµåŠ©é¢åº¦30ä¸‡", "é¡¹ç›®æ’æœŸæ§åˆ¶æƒ", "åˆåŒæ¨¡æ¿/æ³•åŠ¡æ¥å£"]
        ];
        
        // èµ„æºè¾“å…¥éšæœºæç¤ºè¯­
        const resourcePlaceholders = [
            "å¾®ä¿¡ç¤¾ç¾¤5ä¸ªã€è§†é¢‘å·10ä¸‡ç²‰ã€å¹´åº¦å¹¿å‘Šé¢„ç®—50ä¸‡ã€äº§å“è¯•ç”¨ç 100ä¸ªã€æ´»åŠ¨åœºåœ°ä¸€å¤©ã€å“ç‰Œå¯¹æ¥äººï¼šXX",
            "ç”µå•†æ¸ é“ä½3ä¸ªã€çº¿ä¸‹é—¨åº—2å®¶ã€KOLåˆä½œä½2æœŸã€åª’ä½“é‡‡è®¿èµ„æºã€APIæˆæƒã€è¯¾ç¨‹ç‰ˆæƒ",
            "ä¼ä¸šå®¢æˆ·åå•200æ¡ã€æ‹›å•†ä¼šåœºåœ°ã€æŠ•å§”ä¼šè·¯æ¼”åé¢ã€ä¾›åº”é“¾å·¥å‚æ¡£æœŸã€æ–½å·¥é˜Ÿ2ç»„"
        ];
        
        // åŠ¨æ€æç¤ºè¯­æ•°æ®
        const inspirationTexts = [
            "è€æ¿åˆšæ‰¹é¢„ç®—ï¼Œéœ€è¦å°½å¿«èŠ±æ‰",
            "æœ€è¿‘è¦å†² KPI / å†²ä¸šç»©", 
            "æœ‰é—²ç½®å›¢é˜Ÿ / åœºåœ° / èµ„æºæƒ³åˆ©ç”¨",
            "æƒ³æµ‹è¯•ä¸€ä¸ªæ–°å¸‚åœº/æ–°æ¸ é“çš„ååº”",
            "éœ€è¦å¿«é€Ÿåˆ·ä¸€ä¸ªæ¡ˆä¾‹ / æˆåŠŸæ•…äº‹",
            "åˆšæ‹¿åˆ°æ–°äº§å“ï¼Œæƒ³æ‰¾æœºä¼šè¯•æ°´",
            "éœ€è¦åº”ä»˜ä¸Šçº§/ç”²æ–¹çš„æ´»åŠ¨è¦æ±‚",
            "å¸Œæœ›å¹´åº•å‰å®ŒæˆæŸä¸ªæŒ‡æ ‡",
            "æƒ³åœ¨åœˆå­é‡Œåˆ¶é€ ä¸€æ¬¡è¯é¢˜",
            "æœ€è¿‘ç©ºæ¡£æœŸï¼Œæƒ³æ‰¾äº‹åšä¿æŒæ›å…‰",
            "å¸Œæœ›ç”¨é¡¹ç›®æ¢å–é•¿æœŸåˆä½œå…³ç³»",
            "ä¸´æ—¶æœ‰åª’ä½“/æ´»åŠ¨æ›å…‰æœºä¼š",
            "éœ€è¦çŸ­æœŸå†…éªŒè¯ä¸€ä¸ªæƒ³æ³•æ˜¯å¦å¯è¡Œ",
            "æƒ³å ä¸ª\"å‘ä½\"é¿å…ç«äº‰å¯¹æ‰‹å…ˆåš",
            "æœ€è¿‘èµ„é‡‘æˆ–èµ„æºåˆ°æœŸï¼Œä¸ç”¨å°±æµªè´¹"
        ];
        
        // éšæœºè®¾ç½®æç¤ºè¯­
        function setRandomPlaceholder() {
            const textareas = document.querySelectorAll('.dynamic-placeholder-textarea');
            textareas.forEach(textarea => {
                const randomText = inspirationTexts[Math.floor(Math.random() * inspirationTexts.length)];
                textarea.placeholder = `è¿˜æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç‚¹ä¼šè®©ä»–æ„¿æ„å‚ä¸ï¼Ÿæ¯”å¦‚ï¼š${randomText}`;
            });
            
            // è®¾ç½®èµ„æºè¾“å…¥çš„éšæœºæç¤ºè¯­
            const resourceInputs = document.querySelectorAll('.dynamic-placeholder-resource');
            resourceInputs.forEach(input => {
                const randomPlaceholder = resourcePlaceholders[Math.floor(Math.random() * resourcePlaceholders.length)];
                input.placeholder = randomPlaceholder;
            });
        }
        
        // æ›´æ–°èµ„æºå€™é€‰æ ‡ç­¾
        function updateResourceSuggestions(personCard) {
            const personId = personCard.querySelector('.resource-input').dataset.personId;
            const roleCheckboxes = personCard.querySelectorAll('input[name="person_role[]"]:checked');
            const suggestionsContainer = personCard.querySelector('.resource-suggestions-scroll');
            
            // è·å–æ‰€æœ‰é€‰ä¸­è§’è‰²çš„å€™é€‰èµ„æºï¼ˆå¹¶é›†ï¼‰
            const allSuggestions = new Set();
            roleCheckboxes.forEach(checkbox => {
                const role = checkbox.value;
                if (roleToResourceSuggestions[role]) {
                    roleToResourceSuggestions[role].forEach(resource => allSuggestions.add(resource));
                }
            });
            
            // æ¸…ç©ºå¹¶é‡æ–°ç”Ÿæˆå€™é€‰æ ‡ç­¾
            suggestionsContainer.innerHTML = '';
            
            if (allSuggestions.size > 0) {
                allSuggestions.forEach(resource => {
                    const tag = document.createElement('div');
                    tag.className = 'resource-suggestion-tag';
                    tag.textContent = resource;
                    tag.onclick = () => toggleResourceSuggestion(tag, resource, personId);
                    suggestionsContainer.appendChild(tag);
                });
            } else {
                suggestionsContainer.innerHTML = '<div style="color: var(--color-gray-500); font-size: var(--text-sm); padding: 8px;">è¯·å…ˆé€‰æ‹©èº«ä»½è§’è‰²ä»¥è·å¾—èµ„æºæ¨è</div>';
            }
        }
        
        // åˆ‡æ¢èµ„æºå€™é€‰æ ‡ç­¾
        function toggleResourceSuggestion(tagElement, resource, personId) {
            if (tagElement.classList.contains('selected')) {
                // ç§»é™¤èµ„æº
                removeSelectedResource(resource, personId);
                tagElement.classList.remove('selected');
            } else {
                // æ·»åŠ èµ„æº
                addSelectedResource(resource, personId);
                tagElement.classList.add('selected');
            }
        }
        
        // æ·»åŠ é€‰ä¸­çš„èµ„æº
        function addSelectedResource(resource, personId) {
            const targetCard = document.querySelector(`[data-person-id="${personId}"]`).closest('.person-card');
            const container = targetCard.querySelector('.selected-resources-container');
            const existingTags = Array.from(container.querySelectorAll('.selected-resource-tag'));
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            if (existingTags.some(tag => tag.dataset.resource === resource)) {
                return;
            }
            
            // éªŒè¯èµ„æºæ ¼å¼
            const validation = validateResource(resource);
            if (validation.type === 'error') {
                showResourceValidation(personId, validation.message, 'error');
                return;
            } else if (validation.type === 'warning') {
                showResourceValidation(personId, validation.message, 'warning');
            }
            
            // åˆ›å»ºæ ‡ç­¾
            const tag = document.createElement('div');
            tag.className = 'selected-resource-tag';
            tag.dataset.resource = resource;
            tag.innerHTML = `
                <span>${resource}</span>
                <button type="button" class="remove-btn" onclick="removeSelectedResource('${resource.replace(/'/g, "\\'")}', '${personId}')">&times;</button>
            `;
            
            container.appendChild(tag);
            container.classList.add('has-resources');
            container.classList.remove('empty');
            updateResourcesData(personId);
        }
        
        // ç§»é™¤é€‰ä¸­çš„èµ„æº
        function removeSelectedResource(resource, personId) {
            const targetCard = document.querySelector(`[data-person-id="${personId}"]`).closest('.person-card');
            const container = targetCard.querySelector('.selected-resources-container');
            const tag = container.querySelector(`[data-resource="${resource}"]`);
            if (tag) {
                tag.remove();
            }
            
            if (container.children.length === 0) {
                container.classList.remove('has-resources');
                container.classList.add('empty');
            }
            
            // æ›´æ–°å€™é€‰æ ‡ç­¾çŠ¶æ€
            const currentCard = container.closest('.person-card');
            const suggestionTags = currentCard.querySelectorAll('.resource-suggestion-tag');
            suggestionTags.forEach(tag => {
                if (tag.textContent === resource) {
                    tag.classList.remove('selected');
                }
            });
            
            updateResourcesData(personId);
        }
        
        // éªŒè¯èµ„æºæ ¼å¼
        function validateResource(resource) {
            // é•¿åº¦æ£€æŸ¥
            if (resource.length > 40) {
                return {
                    type: 'error',
                    message: 'è¯·æ›´ç²¾ç‚¼ï¼Œä¿ç•™å…³é”®ä¿¡æ¯ï¼ˆå¹³å°/æ•°é‡/æƒé™ï¼‰ï¼Œå•æ¡ä¸è¶…è¿‡40å­—ã€‚'
                };
            }
            
            // ç©ºæ³›è¯æ£€æŸ¥
            const vaguePattern = /(èµ„æº|äººè„‰|æ¸ é“|é¢„ç®—|ç²‰ä¸|å…³ç³»|èƒ½åŠ›|å›¢é˜Ÿ)$/;
            if (vaguePattern.test(resource.trim())) {
                return {
                    type: 'warning',
                    message: 'è¯·å…·ä½“åˆ°å¹³å°/æ•°é‡/å¯¹è±¡/æƒé™ï¼Œä¾‹å¦‚"è§†é¢‘å·10ä¸‡ç²‰"è€Œä¸æ˜¯"ç²‰ä¸"ã€‚'
                };
            }
            
            return { type: 'success' };
        }
        
        // æ˜¾ç¤ºèµ„æºéªŒè¯æç¤º
        function showResourceValidation(personId, message, type) {
            const targetCard = document.querySelector(`[data-person-id="${personId}"]`).closest('.person-card');
            const validationElement = targetCard.querySelector('.resource-validation');
            validationElement.textContent = message;
            validationElement.className = `resource-validation ${type}`;
            validationElement.style.display = 'block';
            
            // 3ç§’åè‡ªåŠ¨éšè—è­¦å‘Š
            if (type === 'warning') {
                setTimeout(() => {
                    validationElement.style.display = 'none';
                }, 3000);
            }
        }
        
        // æ ¼å¼åŒ–èµ„æºæ–‡æœ¬
        function formatResource(resource) {
            return resource
                .replace(/ï¼Œ/g, ',')  // å…¨è§’é€—å·è½¬åŠè§’
                .replace(/(\d+)w/gi, '$1ä¸‡')  // wè½¬ä¸‡
                .replace(/(\d+)ä¸‡\+/g, '$1ä¸‡')  // ä¸‡+è½¬ä¸‡
                .replace(/ç¤¾ç¾¤x(\d+)/g, 'ç¤¾ç¾¤$1ä¸ª')  // ç¤¾ç¾¤x3è½¬ç¤¾ç¾¤3ä¸ª
                .replace(/ç²‰(\d+)w/g, 'ç²‰ä¸$1ä¸‡')  // ç²‰5wè½¬ç²‰ä¸5ä¸‡
                .trim();
        }
        
        // æ›´æ–°èµ„æºæ•°æ®åˆ°éšè—å­—æ®µ
        function updateResourcesData(personId) {
            const targetCard = document.querySelector(`[data-person-id="${personId}"]`).closest('.person-card');
            const container = targetCard.querySelector('.selected-resources-container');
            const tags = container.querySelectorAll('.selected-resource-tag');
            const resources = Array.from(tags).map(tag => formatResource(tag.dataset.resource));
            
            const hiddenInput = targetCard.querySelector('.resources-data');
            hiddenInput.value = JSON.stringify(resources);
        }
        
        // å¤„ç†èµ„æºè¾“å…¥æ¡†
        function initResourceInput(personCard) {
            const input = personCard.querySelector('.resource-input');
            const personId = input.dataset.personId;
            
            // å›è½¦å’Œé€—å·åˆ†éš”
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ',') {
                    e.preventDefault();
                    const value = this.value.trim();
                    if (value) {
                        // æŒ‰é€—å·æˆ–æ¢è¡Œåˆ†å‰²
                        const resources = value.split(/[,ï¼Œ\n]/).map(r => r.trim()).filter(r => r);
                        resources.forEach(resource => {
                            const formatted = formatResource(resource);
                            if (formatted) {
                                addSelectedResource(formatted, personId);
                            }
                        });
                        this.value = '';
                    }
                } else if (e.key === 'Backspace' && this.value === '') {
                    // åˆ é™¤æœ€åä¸€ä¸ªæ ‡ç­¾
                    const currentCard = this.closest('.person-card');
                    const container = currentCard.querySelector('.selected-resources-container');
                    const lastTag = container.querySelector('.selected-resource-tag:last-child');
                    if (lastTag) {
                        const resource = lastTag.dataset.resource;
                        removeSelectedResource(resource, personId);
                    }
                }
            });
            
            // ç²˜è´´å¤„ç†
            input.addEventListener('paste', function(e) {
                e.preventDefault();
                const paste = (e.clipboardData || window.clipboardData).getData('text');
                const resources = paste.split(/[,ï¼Œ\n]/).map(r => r.trim()).filter(r => r);
                resources.forEach(resource => {
                    const formatted = formatResource(resource);
                    if (formatted) {
                        addSelectedResource(formatted, personId);
                    }
                });
            });
        }
        
        // ä¸€é”®ç¤ºä¾‹åŠŸèƒ½
        function addResourceExample(button) {
            const currentCard = button.closest('.person-card');
            const input = currentCard.querySelector('.resource-input');
            const personId = input.dataset.personId;
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªç¤ºä¾‹æ¨¡æ¿
            const example = resourceExamples[Math.floor(Math.random() * resourceExamples.length)];
            
            // æ·»åŠ ç¤ºä¾‹èµ„æº
            example.forEach(resource => {
                addSelectedResource(resource, personId);
            });
        }
        
        // åˆå§‹åŒ–ç©ºçŠ¶æ€æ˜¾ç¤º
        function initResourceEmptyState() {
            const containers = document.querySelectorAll('.selected-resources-container');
            containers.forEach(container => {
                if (container.children.length === 0) {
                    container.classList.add('empty');
                } else {
                    container.classList.remove('empty');
                }
            });
        }
        
        // æ˜¾ç¤ºçµæ„Ÿæ¨¡æ€æ¡†
        function showInspirationModal(button) {
            const textarea = button.parentElement.querySelector('textarea');
            
            // åˆ›å»ºæ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.className = 'inspiration-modal';
            modal.innerHTML = `
                <div class="inspiration-modal-content">
                    <button class="inspiration-modal-close" onclick="closeInspirationModal()">&times;</button>
                    <h5><i class="fas fa-lightbulb" style="color: #667eea; margin-right: 8px;"></i>å¸¸è§åŠ¨æœºçµæ„Ÿ</h5>
                    <div class="inspiration-list">
                        ${inspirationTexts.map(text => 
                            `<div class="inspiration-item" onclick="selectInspiration(this, '${text.replace(/'/g, "\\'")}')">${text}</div>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // å­˜å‚¨å½“å‰ textarea å¼•ç”¨
            modal.targetTextarea = textarea;
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            setTimeout(() => modal.classList.add('show'), 10);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeInspirationModal();
                }
            });
        }
        
        // é€‰æ‹©çµæ„Ÿæ–‡æœ¬
        function selectInspiration(item, text) {
            const modal = document.querySelector('.inspiration-modal');
            if (modal && modal.targetTextarea) {
                const currentValue = modal.targetTextarea.value;
                if (currentValue) {
                    modal.targetTextarea.value = currentValue + (currentValue.endsWith('\n') ? '' : '\n') + text;
                } else {
                    modal.targetTextarea.value = text;
                }
                modal.targetTextarea.focus();
            }
            closeInspirationModal();
        }
        
        // å…³é—­çµæ„Ÿæ¨¡æ€æ¡†
        function closeInspirationModal() {
            const modal = document.querySelector('.inspiration-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            }
        }
        
        // è¡¨å•æäº¤å‰éªŒè¯
        document.getElementById('mainForm').addEventListener('submit', function(e) {
            const projectName = document.getElementById('project_name').value.trim();
            const projectDescription = document.getElementById('project_description').value.trim();
            
            if (!projectName || !projectDescription) {
                e.preventDefault();
                alert('è¯·å¡«å†™é¡¹ç›®åç§°å’ŒèƒŒæ™¯æè¿°');
                return;
            }
            
            // æ·»åŠ æäº¤åŠ¨ç”»
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>æ­£åœ¨åˆ†æ...';
            submitBtn.disabled = true;
        });
        
        // é¡µé¢åŠ è½½æ—¶æ·»åŠ åˆå§‹äººç‰©å¡ç‰‡
        document.addEventListener('DOMContentLoaded', function() {
            addPerson();
        });
        
        // æ·»åŠ å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // æ·»åŠ è¾“å…¥æ¡†ç„¦ç‚¹åŠ¨ç”»
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
            });
        });
    </script>
</body>
</html>